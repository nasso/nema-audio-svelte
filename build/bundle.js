var app=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function e(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function t(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}let n=0;var r,s,o,i,l,c,a;!function(e){e.Absolute="absolute",e.Relative="relative"}(r||(r={})),function(e){e.Sample="a-rate",e.Buffer="k-rate"}(s||(s={}));class u{constructor(e){this.outputs=1,this.inputs=1,this.parameters=e}}class p extends u{constructor(e){super(e),this.inputs=0}}class d{constructor(e){this.id=++n,this.inputs=new Map,e=Object.assign({},{x:0,y:0,enabled:!0,passthrough:!1},e),this.mod=e.effect,this.x=e.x,this.y=e.y,this.enabled=e.enabled,this.passthrough=e.passthrough}connect(e,t=0,n=0){return e.connectInput(t,{node:this,output:n}),this}disconnect(e,t=0,n){const r=e.inputs.get(t);return r.node!==this||"number"==typeof n&&r.output!==n||e.disconnectInput(t),this}connectInput(e,t){return this.inputs.set(e,t),this}disconnectInput(e){return this.inputs.delete(e),this}}class f{constructor(){this.nodes=new Set([])}deleteNode(e){return this.nodes.delete(e),this.nodes.forEach((t=>{t.inputs.forEach(((n,r)=>{n.node===e&&t.disconnectInput(r)}))})),this}}class ${constructor(e){this.length=1,this.extent=1,this.extentPast=0,this.start=0,this.name=e}get totalExtent(){return this.extent-this.extentPast}}class h extends ${constructor(e=""){super(e)}duplicate(){const e=new h;return e.length=this.length,e.extent=this.extent,e.extentPast=this.extentPast,e.start=this.start,e}}class m extends d{constructor(){super(...arguments),this.name="Track name",this.enabled=!0,this.height=64,this.clips=[]}}class g extends ${constructor(e,t,n,r,s=r,o=0){super(e),this.blob=t,this.start=n,this.length=r,this.extent=s,this.extentPast=o}duplicate(){return new g(this.name,this.blob,this.start,this.length,this.extent,this.extentPast)}}class v extends p{}class y extends v{constructor(){super([{name:"Volume",value:1,min:0,max:1,accuracy:s.Sample,type:r.Absolute},{name:"Pan",value:0,min:-1,max:1,accuracy:s.Sample,type:r.Relative}])}createScheduler(e){const t=e.context,n=t.createGain();return n.gain.value=1,{connect(e,t=0,r=0){e instanceof AudioParam?n.connect(e,t):n.connect(e,t,r)},playClip(r,s=0,o=0){const i=r.extent-o,l=(o%r.length+r.length)%r.length,c=t.createBufferSource();c.loop=!0,c.connect(n),e.decodeBlob(r.blob).then((e=>{c.buffer=e,c.start(t.currentTime+s,l),c.stop(t.currentTime+s+i)}))},stop(){n.disconnect()}}}canPlay(e){return e instanceof g}}class x extends m{constructor(){super({effect:new y}),this.description="Audio",this.volume=1,this.pan=0}}o=new WeakMap,i=new WeakMap,l=new WeakMap,c=new WeakMap,a=new WeakMap;class w extends u{constructor(){super([{name:"Volume A",value:.8,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Pan A",value:0,min:-1,max:1,type:r.Relative,accuracy:s.Sample},{name:"Volume B",value:.8,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Pan B",value:0,min:-1,max:1,type:r.Relative,accuracy:s.Sample}]),this.name="Channel merger",this.inputs=2}}class E extends u{constructor(){super([]),this.name="Channel splitter",this.outputs=2}}class b extends u{constructor(){super([{name:"Threshold",value:0,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Knee",value:0,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Ratio",value:0,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Reduction",value:0,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Attack",value:0,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Release",value:0,min:0,max:1,type:r.Absolute,accuracy:s.Sample}]),this.name="Compressor"}}class k extends u{constructor(){super([{name:"Time",value:0,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Offset",value:0,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Feedback",value:.1,min:0,max:1,type:r.Absolute,accuracy:s.Sample},{name:"Mix",value:.5,min:0,max:1,type:r.Absolute,accuracy:s.Sample}]),this.name="Delay"}}class R extends u{constructor(){super([{name:"Gain",value:1,min:-2,max:2,type:r.Relative,accuracy:s.Sample}]),this.name="Gain"}}class I extends u{constructor(){super([{name:"Volume",value:1,min:0,max:1.2,type:r.Absolute,accuracy:s.Sample},{name:"Pan",value:0,min:-1,max:1,type:r.Relative,accuracy:s.Sample}]),this.name="Output",this.outputs=0}}function T(){}const A=e=>e;function N(e,t){for(const n in t)e[n]=t[n];return e}function O(e){return e()}function M(){return Object.create(null)}function L(e){e.forEach(O)}function P(e){return"function"==typeof e}function S(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function C(e,...t){if(null==e)return T;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function D(e){let t;return C(e,(e=>t=e))(),t}function j(e,t,n){e.$$.on_destroy.push(C(t,n))}function _(e,t,n,r){if(e){const s=G(e,t,n,r);return e[0](s)}}function G(e,t,n,r){return e[1]&&r?N(n.ctx.slice(),e[1](r(t))):n.ctx}function z(e,t,n,r,s,o,i){const l=function(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|s[r];return e}return t.dirty|s}return t.dirty}(t,r,s,o);if(l){const s=G(t,n,r,i);e.p(s,l)}}function X(e,t,n=t){return e.set(n),t}function B(e){return e&&P(e.destroy)?e.destroy:T}const F="undefined"!=typeof window;let W=F?()=>window.performance.now():()=>Date.now(),U=F?e=>requestAnimationFrame(e):T;const V=new Set;function H(e){V.forEach((t=>{t.c(e)||(V.delete(t),t.f())})),0!==V.size&&U(H)}function q(e){let t;return 0===V.size&&U(H),{promise:new Promise((n=>{V.add(t={c:e,f:n})})),abort(){V.delete(t)}}}function Y(e,t){e.appendChild(t)}function K(e,t,n){e.insertBefore(t,n||null)}function J(e){e.parentNode.removeChild(e)}function Z(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Q(e){return document.createElement(e)}function ee(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function te(e){return document.createTextNode(e)}function ne(){return te(" ")}function re(){return te("")}function se(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function oe(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function ie(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function le(e){return""===e?null:+e}function ce(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ae(e,t){e.value=null==t?"":t}function ue(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}let pe,de;function fe(){if(void 0===pe){pe=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){pe=!0}}return pe}function $e(e,t){const n=getComputedStyle(e),r=(parseInt(n.zIndex)||0)-1;"static"===n.position&&(e.style.position="relative");const s=Q("iframe");s.setAttribute("style",`display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${r};`),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const o=fe();let i;return o?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=se(window,"message",(e=>{e.source===s.contentWindow&&t()}))):(s.src="about:blank",s.onload=()=>{i=se(s.contentWindow,"resize",t)}),Y(e,s),()=>{(o||i&&s.contentWindow)&&i(),J(s)}}function he(e,t,n){e.classList[n?"add":"remove"](t)}function me(e){de=e}function ge(){if(!de)throw new Error("Function called outside component initialization");return de}function ve(){const e=ge();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const s=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach((t=>{t.call(e,s)}))}}}function ye(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}const xe=[],we=[],Ee=[],be=[],ke=Promise.resolve();let Re=!1;function Ie(){Re||(Re=!0,ke.then(Le))}function Te(){return Ie(),ke}function Ae(e){Ee.push(e)}function Ne(e){be.push(e)}let Oe=!1;const Me=new Set;function Le(){if(!Oe){Oe=!0;do{for(let e=0;e<xe.length;e+=1){const t=xe[e];me(t),Pe(t.$$)}for(me(null),xe.length=0;we.length;)we.pop()();for(let e=0;e<Ee.length;e+=1){const t=Ee[e];Me.has(t)||(Me.add(t),t())}Ee.length=0}while(xe.length);for(;be.length;)be.pop()();Re=!1,Oe=!1,Me.clear()}}function Pe(e){if(null!==e.fragment){e.update(),L(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ae)}}const Se=new Set;let Ce;function De(){Ce={r:0,c:[],p:Ce}}function je(){Ce.r||L(Ce.c),Ce=Ce.p}function _e(e,t){e&&e.i&&(Se.delete(e),e.i(t))}function Ge(e,t,n,r){if(e&&e.o){if(Se.has(e))return;Se.add(e),Ce.c.push((()=>{Se.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function ze(e,t){const n=t.token={};function r(e,r,s,o){if(t.token!==n)return;t.resolved=o;let i=t.ctx;void 0!==s&&(i=i.slice(),i[s]=o);const l=e&&(t.current=e)(i);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(De(),Ge(e,1,1,(()=>{t.blocks[n]=null})),je())})):t.block.d(1),l.c(),_e(l,1),l.m(t.mount(),t.anchor),c=!0),t.block=l,t.blocks&&(t.blocks[r]=l),c&&Le()}if((s=e)&&"object"==typeof s&&"function"==typeof s.then){const n=ge();if(e.then((e=>{me(n),r(t.then,1,t.value,e),me(null)}),(e=>{if(me(n),r(t.catch,2,t.error,e),me(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}var s}function Xe(e,t){Ge(e,1,1,(()=>{t.delete(e.key)}))}function Be(e,t,n,r,s,o,i,l,c,a,u,p){let d=e.length,f=o.length,$=d;const h={};for(;$--;)h[e[$].key]=$;const m=[],g=new Map,v=new Map;for($=f;$--;){const e=p(s,o,$),l=n(e);let c=i.get(l);c?r&&c.p(e,t):(c=a(l,e),c.c()),g.set(l,m[$]=c),l in h&&v.set(l,Math.abs($-h[l]))}const y=new Set,x=new Set;function w(e){_e(e,1),e.m(l,u),i.set(e.key,e),u=e.first,f--}for(;d&&f;){const t=m[f-1],n=e[d-1],r=t.key,s=n.key;t===n?(u=t.first,d--,f--):g.has(s)?!i.has(r)||y.has(r)?w(t):x.has(s)?d--:v.get(r)>v.get(s)?(x.add(r),w(t)):(y.add(s),d--):(c(n,i),d--)}for(;d--;){const t=e[d];g.has(t.key)||c(t,i)}for(;f;)w(m[f-1]);return m}function Fe(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function We(e){e&&e.c()}function Ue(e,t,n){const{fragment:r,on_mount:s,on_destroy:o,after_update:i}=e.$$;r&&r.m(t,n),Ae((()=>{const t=s.map(O).filter(P);o?o.push(...t):L(t),e.$$.on_mount=[]})),i.forEach(Ae)}function Ve(e,t){const n=e.$$;null!==n.fragment&&(L(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function He(e,t,n,r,s,o,i=[-1]){const l=de;me(e);const c=t.props||{},a=e.$$={fragment:null,ctx:null,props:o,update:T,not_equal:s,bound:M(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:M(),dirty:i,skip_bound:!1};let u=!1;if(a.ctx=n?n(e,c,((t,n,...r)=>{const o=r.length?r[0]:n;return a.ctx&&s(a.ctx[t],a.ctx[t]=o)&&(!a.skip_bound&&a.bound[t]&&a.bound[t](o),u&&function(e,t){-1===e.$$.dirty[0]&&(xe.push(e),Ie(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],a.update(),u=!0,L(a.before_update),a.fragment=!!r&&r(a.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);a.fragment&&a.fragment.l(e),e.forEach(J)}else a.fragment&&a.fragment.c();t.intro&&_e(e.$$.fragment),Ue(e,t.target,t.anchor),Le()}me(l)}class qe{$destroy(){Ve(this,1),this.$destroy=T}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ye=[];function Ke(e,t=T){let n;const r=[];function s(t){if(S(e,t)&&(e=t,n)){const t=!Ye.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),Ye.push(n,e)}if(t){for(let e=0;e<Ye.length;e+=2)Ye[e][0](Ye[e+1]);Ye.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,i=T){const l=[o,i];return r.push(l),1===r.length&&(n=t(s)||T),o(e),()=>{const e=r.indexOf(l);-1!==e&&r.splice(e,1),0===r.length&&(n(),n=null)}}}}const Je=Ke(new class{constructor(){this.name="New Project",this.sampleRate=48e3,this.tempo=136,this.signature=[4,4],this.tracks=[],this.graph=new f}timeToBeats(e){return e/60*this.tempo}beatsToTime(e){return e/this.tempo*60}timeToBars(e){return this.timeToBeats(e)/this.signature[0]}barsToTime(e){return this.beatsToTime(e*this.signature[0])}get quantum(){return 128/this.sampleRate}});var Ze=Ke(new class{constructor(e,n){this.loop=!0,this.startCursor=0,this.endCursor=0,o.set(this,void 0),i.set(this,new WeakMap),l.set(this,!1),c.set(this,0),a.set(this,new Set),t(this,o,e)}start(n,r=this.startCursor,s=this.endCursor){if(e(this,l))return this;t(this,l,!0),t(this,c,e(this,o).currentTime-r);for(const t of n.tracks){const n=t.mod;if(t.enabled&&n instanceof v){const r=n.createScheduler(this);r.connect(e(this,o).destination),e(this,a).add(r);for(let e=0;e<t.clips.length;e++){const n=t.clips[e];if(this.currentTime>n.start+n.extent)continue;let s=n.start+n.extentPast-this.currentTime;const o=Math.max(this.currentTime-n.start,n.extentPast);s=Math.max(s,0),r.playClip(n,s,o)}}}return this}stop(){if(e(this,l))return t(this,l,!1),e(this,a).forEach((e=>e.stop())),e(this,a).clear(),this}toggle(t,n=this.startCursor,r=this.endCursor){return e(this,l)?this.stop():this.start(t,n,r)}get playing(){return e(this,l)}get sampleRate(){return e(this,o).sampleRate}get currentTime(){return e(this,l)?e(this,o).currentTime-e(this,c):this.startCursor}get context(){return e(this,o)}decodeBlob(t){let n=e(this,i).get(t);return n||(n=t.arrayBuffer().then((t=>e(this,o).decodeAudioData(t))),e(this,i).set(t,n)),n}}(new AudioContext,D(Je)));var Qe={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};var et,tt,nt="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},rt=(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=Qe,r=(t=e.exports={}).re=[],s=t.src=[],o=t.t={};let i=0;const l=(e,t,n)=>{const l=i++;nt(l,t),o[e]=l,s[l]=t,r[l]=new RegExp(t,n?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${s[o.NUMERICIDENTIFIER]})\\.(${s[o.NUMERICIDENTIFIER]})\\.(${s[o.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${s[o.NUMERICIDENTIFIERLOOSE]})\\.(${s[o.NUMERICIDENTIFIERLOOSE]})\\.(${s[o.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${s[o.NUMERICIDENTIFIER]}|${s[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${s[o.NUMERICIDENTIFIERLOOSE]}|${s[o.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${s[o.PRERELEASEIDENTIFIER]}(?:\\.${s[o.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${s[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[o.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${s[o.BUILDIDENTIFIER]}(?:\\.${s[o.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${s[o.MAINVERSION]}${s[o.PRERELEASE]}?${s[o.BUILD]}?`),l("FULL",`^${s[o.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${s[o.MAINVERSIONLOOSE]}${s[o.PRERELEASELOOSE]}?${s[o.BUILD]}?`),l("LOOSE",`^${s[o.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",s[o.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),l("XRANGEIDENTIFIER",s[o.NUMERICIDENTIFIER]+"|x|X|\\*"),l("XRANGEPLAIN",`[v=\\s]*(${s[o.XRANGEIDENTIFIER]})(?:\\.(${s[o.XRANGEIDENTIFIER]})(?:\\.(${s[o.XRANGEIDENTIFIER]})(?:${s[o.PRERELEASE]})?${s[o.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${s[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[o.XRANGEIDENTIFIERLOOSE]})(?:${s[o.PRERELEASELOOSE]})?${s[o.BUILD]}?)?)?`),l("XRANGE",`^${s[o.GTLT]}\\s*${s[o.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${s[o.GTLT]}\\s*${s[o.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",s[o.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${s[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${s[o.LONETILDE]}${s[o.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${s[o.LONETILDE]}${s[o.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${s[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${s[o.LONECARET]}${s[o.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${s[o.LONECARET]}${s[o.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${s[o.GTLT]}\\s*(${s[o.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${s[o.GTLT]}\\s*(${s[o.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${s[o.GTLT]}\\s*(${s[o.LOOSEPLAIN]}|${s[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${s[o.XRANGEPLAIN]})\\s+-\\s+(${s[o.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${s[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[o.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(tt={path:et,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&tt.path)}},tt.exports),tt.exports);const st=/^[0-9]+$/,ot=(e,t)=>{const n=st.test(e),r=st.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var it={compareIdentifiers:ot,rcompareIdentifiers:(e,t)=>ot(t,e)};const{MAX_LENGTH:lt,MAX_SAFE_INTEGER:ct}=Qe,{re:at,t:ut}=rt,{compareIdentifiers:pt}=it;class dt{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof dt){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>lt)throw new TypeError(`version is longer than ${lt} characters`);nt("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?at[ut.LOOSE]:at[ut.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ct||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ct||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ct||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<ct)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(nt("SemVer.compare",this.version,this.options,e),!(e instanceof dt)){if("string"==typeof e&&e===this.version)return 0;e=new dt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof dt||(e=new dt(e,this.options)),pt(this.major,e.major)||pt(this.minor,e.minor)||pt(this.patch,e.patch)}comparePre(e){if(e instanceof dt||(e=new dt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(nt("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return pt(n,r)}while(++t)}compareBuild(e){e instanceof dt||(e=new dt(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(nt("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return pt(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this}}var ft=dt;const{MAX_LENGTH:$t}=Qe,{re:ht,t:mt}=rt;var gt=(e,t)=>{if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ft)return e;if("string"!=typeof e)return null;if(e.length>$t)return null;if(!(t.loose?ht[mt.LOOSE]:ht[mt.FULL]).test(e))return null;try{return new ft(e,t)}catch(e){return null}};var vt=(e,t)=>{const n=gt(e,t);return n?n.version:null};var yt=(e,t)=>{const n=gt(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var xt=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new ft(e,n).inc(t,r).version}catch(e){return null}};var wt=(e,t,n)=>new ft(e,n).compare(new ft(t,n));var Et=(e,t,n)=>0===wt(e,t,n);var bt=(e,t)=>{if(Et(e,t))return null;{const n=gt(e),r=gt(t),s=n.prerelease.length||r.prerelease.length,o=s?"pre":"",i=s?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return o+e;return i}};var kt=(e,t)=>new ft(e,t).major;var Rt=(e,t)=>new ft(e,t).minor;var It=(e,t)=>new ft(e,t).patch;var Tt=(e,t)=>{const n=gt(e,t);return n&&n.prerelease.length?n.prerelease:null};var At=(e,t,n)=>wt(t,e,n);var Nt=(e,t)=>wt(e,t,!0);var Ot=(e,t,n)=>{const r=new ft(e,n),s=new ft(t,n);return r.compare(s)||r.compareBuild(s)};var Mt=(e,t)=>e.sort(((e,n)=>Ot(e,n,t)));var Lt=(e,t)=>e.sort(((e,n)=>Ot(n,e,t)));var Pt=(e,t,n)=>wt(e,t,n)>0;var St=(e,t,n)=>wt(e,t,n)<0;var Ct=(e,t,n)=>0!==wt(e,t,n);var Dt=(e,t,n)=>wt(e,t,n)>=0;var jt=(e,t,n)=>wt(e,t,n)<=0;var _t=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Et(e,n,r);case"!=":return Ct(e,n,r);case">":return Pt(e,n,r);case">=":return Dt(e,n,r);case"<":return St(e,n,r);case"<=":return jt(e,n,r);default:throw new TypeError("Invalid operator: "+t)}};const{re:Gt,t:zt}=rt;var Xt=(e,t)=>{if(e instanceof ft)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=Gt[zt.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),Gt[zt.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;Gt[zt.COERCERTL].lastIndex=-1}else n=e.match(Gt[zt.COERCE]);return null===n?null:gt(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};class Bt{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Bt)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Bt(e.raw,t);if(e instanceof pn)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=this.options.loose;e=e.trim();const n=t?Wt[Ut.HYPHENRANGELOOSE]:Wt[Ut.HYPHENRANGE];e=e.replace(n,ln(this.options.includePrerelease)),nt("hyphen replace",e),e=e.replace(Wt[Ut.COMPARATORTRIM],Vt),nt("comparator trim",e,Wt[Ut.COMPARATORTRIM]),e=(e=(e=e.replace(Wt[Ut.TILDETRIM],Ht)).replace(Wt[Ut.CARETTRIM],qt)).split(/\s+/).join(" ");const r=t?Wt[Ut.COMPARATORLOOSE]:Wt[Ut.COMPARATOR];return e.split(" ").map((e=>Kt(e,this.options))).join(" ").split(/\s+/).map((e=>on(e,this.options))).filter(this.options.loose?e=>!!e.match(r):()=>!0).map((e=>new pn(e,this.options)))}intersects(e,t){if(!(e instanceof Bt))throw new TypeError("a Range is required");return this.set.some((n=>Yt(n,t)&&e.set.some((e=>Yt(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new ft(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(cn(this.set[t],e,this.options))return!0;return!1}}var Ft=Bt;const{re:Wt,t:Ut,comparatorTrimReplace:Vt,tildeTrimReplace:Ht,caretTrimReplace:qt}=rt,Yt=(e,t)=>{let n=!0;const r=e.slice();let s=r.pop();for(;n&&r.length;)n=r.every((e=>s.intersects(e,t))),s=r.pop();return n},Kt=(e,t)=>(nt("comp",e,t),e=en(e,t),nt("caret",e),e=Zt(e,t),nt("tildes",e),e=nn(e,t),nt("xrange",e),e=sn(e,t),nt("stars",e),e),Jt=e=>!e||"x"===e.toLowerCase()||"*"===e,Zt=(e,t)=>e.trim().split(/\s+/).map((e=>Qt(e,t))).join(" "),Qt=(e,t)=>{const n=t.loose?Wt[Ut.TILDELOOSE]:Wt[Ut.TILDE];return e.replace(n,((t,n,r,s,o)=>{let i;return nt("tilde",e,t,n,r,s,o),Jt(n)?i="":Jt(r)?i=`>=${n}.0.0 <${+n+1}.0.0-0`:Jt(s)?i=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(nt("replaceTilde pr",o),i=`>=${n}.${r}.${s}-${o} <${n}.${+r+1}.0-0`):i=`>=${n}.${r}.${s} <${n}.${+r+1}.0-0`,nt("tilde return",i),i}))},en=(e,t)=>e.trim().split(/\s+/).map((e=>tn(e,t))).join(" "),tn=(e,t)=>{nt("caret",e,t);const n=t.loose?Wt[Ut.CARETLOOSE]:Wt[Ut.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,s,o,i)=>{let l;return nt("caret",e,t,n,s,o,i),Jt(n)?l="":Jt(s)?l=`>=${n}.0.0${r} <${+n+1}.0.0-0`:Jt(o)?l="0"===n?`>=${n}.${s}.0${r} <${n}.${+s+1}.0-0`:`>=${n}.${s}.0${r} <${+n+1}.0.0-0`:i?(nt("replaceCaret pr",i),l="0"===n?"0"===s?`>=${n}.${s}.${o}-${i} <${n}.${s}.${+o+1}-0`:`>=${n}.${s}.${o}-${i} <${n}.${+s+1}.0-0`:`>=${n}.${s}.${o}-${i} <${+n+1}.0.0-0`):(nt("no pr"),l="0"===n?"0"===s?`>=${n}.${s}.${o}${r} <${n}.${s}.${+o+1}-0`:`>=${n}.${s}.${o}${r} <${n}.${+s+1}.0-0`:`>=${n}.${s}.${o} <${+n+1}.0.0-0`),nt("caret return",l),l}))},nn=(e,t)=>(nt("replaceXRanges",e,t),e.split(/\s+/).map((e=>rn(e,t))).join(" ")),rn=(e,t)=>{e=e.trim();const n=t.loose?Wt[Ut.XRANGELOOSE]:Wt[Ut.XRANGE];return e.replace(n,((n,r,s,o,i,l)=>{nt("xRange",e,n,r,s,o,i,l);const c=Jt(s),a=c||Jt(o),u=a||Jt(i),p=u;return"="===r&&p&&(r=""),l=t.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&p?(a&&(o=0),i=0,">"===r?(r=">=",a?(s=+s+1,o=0,i=0):(o=+o+1,i=0)):"<="===r&&(r="<",a?s=+s+1:o=+o+1),"<"===r&&(l="-0"),n=`${r+s}.${o}.${i}${l}`):a?n=`>=${s}.0.0${l} <${+s+1}.0.0-0`:u&&(n=`>=${s}.${o}.0${l} <${s}.${+o+1}.0-0`),nt("xRange return",n),n}))},sn=(e,t)=>(nt("replaceStars",e,t),e.trim().replace(Wt[Ut.STAR],"")),on=(e,t)=>(nt("replaceGTE0",e,t),e.trim().replace(Wt[t.includePrerelease?Ut.GTE0PRE:Ut.GTE0],"")),ln=e=>(t,n,r,s,o,i,l,c,a,u,p,d,f)=>`${n=Jt(r)?"":Jt(s)?`>=${r}.0.0${e?"-0":""}`:Jt(o)?`>=${r}.${s}.0${e?"-0":""}`:i?">="+n:`>=${n}${e?"-0":""}`} ${c=Jt(a)?"":Jt(u)?`<${+a+1}.0.0-0`:Jt(p)?`<${a}.${+u+1}.0-0`:d?`<=${a}.${u}.${p}-${d}`:e?`<${a}.${u}.${+p+1}-0`:"<="+c}`.trim(),cn=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(nt(e[n].semver),e[n].semver!==pn.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},an=Symbol("SemVer ANY");class un{static get ANY(){return an}constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof un){if(e.loose===!!t.loose)return e;e=e.value}nt("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===an?this.value="":this.value=this.operator+this.semver.version,nt("comp",this)}parse(e){const t=this.options.loose?dn[fn.COMPARATORLOOSE]:dn[fn.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new ft(n[2],this.options.loose):this.semver=an}toString(){return this.value}test(e){if(nt("Comparator.test",e,this.options.loose),this.semver===an||e===an)return!0;if("string"==typeof e)try{e=new ft(e,this.options)}catch(e){return!1}return _t(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof un))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new Ft(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new Ft(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),i=_t(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=_t(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||s&&o||i||l}}var pn=un;const{re:dn,t:fn}=rt;var $n=(e,t,n)=>{try{t=new Ft(t,n)}catch(e){return!1}return t.test(e)};var hn=(e,t)=>new Ft(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));var mn=(e,t,n)=>{let r=null,s=null,o=null;try{o=new Ft(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&-1!==s.compare(e)||(r=e,s=new ft(r,n)))})),r};var gn=(e,t,n)=>{let r=null,s=null,o=null;try{o=new Ft(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&1!==s.compare(e)||(r=e,s=new ft(r,n)))})),r};var vn=(e,t)=>{e=new Ft(e,t);let n=new ft("0.0.0");if(e.test(n))return n;if(n=new ft("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){e.set[t].forEach((e=>{const t=new ft(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!Pt(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}return n&&e.test(n)?n:null};var yn=(e,t)=>{try{return new Ft(e,t).range||"*"}catch(e){return null}};const{ANY:xn}=pn;var wn=(e,t,n,r)=>{let s,o,i,l,c;switch(e=new ft(e,r),t=new Ft(t,r),n){case">":s=Pt,o=jt,i=St,l=">",c=">=";break;case"<":s=St,o=Dt,i=Pt,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($n(e,t,r))return!1;for(let n=0;n<t.set.length;++n){const a=t.set[n];let u=null,p=null;if(a.forEach((e=>{e.semver===xn&&(e=new pn(">=0.0.0")),u=u||e,p=p||e,s(e.semver,u.semver,r)?u=e:i(e.semver,p.semver,r)&&(p=e)})),u.operator===l||u.operator===c)return!1;if((!p.operator||p.operator===l)&&o(e,p.semver))return!1;if(p.operator===c&&i(e,p.semver))return!1}return!0};var En=(e,t,n)=>wn(e,t,">",n);var bn=(e,t,n)=>wn(e,t,"<",n);var kn=(e,t,n)=>(e=new Ft(e,n),t=new Ft(t,n),e.intersects(t));const{ANY:Rn}=pn,In=(e,t,n)=>{if(1===e.length&&e[0].semver===Rn)return 1===t.length&&t[0].semver===Rn;const r=new Set;let s,o,i,l,c,a,u;for(const t of e)">"===t.operator||">="===t.operator?s=Tn(s,t,n):"<"===t.operator||"<="===t.operator?o=An(o,t,n):r.add(t.semver);if(r.size>1)return null;if(s&&o){if(i=wt(s.semver,o.semver,n),i>0)return null;if(0===i&&(">="!==s.operator||"<="!==o.operator))return null}for(const e of r){if(s&&!$n(e,String(s),n))return null;if(o&&!$n(e,String(o),n))return null;for(const r of t)if(!$n(e,String(r),n))return!1;return!0}for(const e of t){if(u=u||">"===e.operator||">="===e.operator,a=a||"<"===e.operator||"<="===e.operator,s)if(">"===e.operator||">="===e.operator){if(l=Tn(s,e,n),l===e)return!1}else if(">="===s.operator&&!$n(s.semver,String(e),n))return!1;if(o)if("<"===e.operator||"<="===e.operator){if(c=An(o,e,n),c===e)return!1}else if("<="===o.operator&&!$n(o.semver,String(e),n))return!1;if(!e.operator&&(o||s)&&0!==i)return!1}return!(s&&a&&!o&&0!==i)&&!(o&&u&&!s&&0!==i)},Tn=(e,t,n)=>{if(!e)return t;const r=wt(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},An=(e,t,n)=>{if(!e)return t;const r=wt(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};var Nn,On=(e,t,n)=>{e=new Ft(e,n),t=new Ft(t,n);let r=!1;e:for(const s of e.set){for(const e of t.set){const t=In(s,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0},Mn={re:rt.re,src:rt.src,tokens:rt.t,SEMVER_SPEC_VERSION:Qe.SEMVER_SPEC_VERSION,SemVer:ft,compareIdentifiers:it.compareIdentifiers,rcompareIdentifiers:it.rcompareIdentifiers,parse:gt,valid:vt,clean:yt,inc:xt,diff:bt,major:kt,minor:Rt,patch:It,prerelease:Tt,compare:wt,rcompare:At,compareLoose:Nt,compareBuild:Ot,sort:Mt,rsort:Lt,gt:Pt,lt:St,eq:Et,neq:Ct,gte:Dt,lte:jt,cmp:_t,coerce:Xt,Comparator:pn,Range:Ft,satisfies:$n,toComparators:hn,maxSatisfying:mn,minSatisfying:gn,minVersion:vn,validRange:yn,outside:wn,gtr:En,ltr:bn,intersects:kn,simplifyRange:(e,t,n)=>{const r=[];let s=null,o=null;const i=e.sort(((e,t)=>wt(e,t,n)));for(const e of i){$n(e,t,n)?(o=e,s||(s=e)):(o&&r.push([s,o]),o=null,s=null)}s&&r.push([s,null]);const l=[];for(const[e,t]of r)e===t?l.push(e):t||e!==i[0]?t?e===i[0]?l.push("<="+t):l.push(`${e} - ${t}`):l.push(">="+e):l.push("*");const c=l.join(" || "),a="string"==typeof t.raw?t.raw:String(t);return c.length<a.length?c:t},subset:On};function Ln(e,t,n){if(!window.localStorage)return Ke(t);const r=Object.assign({version:"1.0.0",timeout:200,patch:(e,t)=>{const n=Object.keys(t);Object.keys(e).filter((e=>n.includes(e))).forEach((n=>{e[n]=t[n]}))}},n),s={ver:r.version,data:t},o=window.localStorage.getItem(e);if(o){const t=JSON.parse(o);(function(e){if(e instanceof Object&&!Array.isArray(e)){const t=e;return!!t.ver&&void 0!==t.data}return!1})(t)&&(Mn.satisfies(r.version,"^"+t.ver)&&r.patch(s.data,t.data,t.ver),Mn.eq(s.ver,t.ver)||window.localStorage.setItem(e,JSON.stringify(s)))}const i=Ke(s);let l=null;return i.subscribe((t=>{l&&clearTimeout(l),l=setTimeout((()=>{l=null,window.localStorage.setItem(e,JSON.stringify(t))}),r.timeout)})),{subscribe:e=>i.subscribe((({data:t})=>e(t))),set:e=>{i.update((t=>Object.assign(Object.assign({},t),{data:e})))},update:e=>{i.update((t=>Object.assign(Object.assign({},t),{data:e(t.data)})))}}}!function(e){e.Timeline="timeline",e.Graph="graph"}(Nn||(Nn={}));const Pn=Ln("nema-ui",{sidePaneWidth:200,bottomPaneHeight:200,trackHeadsWidth:150,tracklistMode:Nn.Timeline,usePointerLock:!1},{version:"0.1.0"}),Sn=Ln("nema-settings",{userShortcuts:[]},{version:"0.1.0"}),Cn=[{key:"delete",command:"timeline.clip.delete"},{key:"delete",command:"timeline.track.delete"},{key:"delete",command:"graph.node.delete"},{key:"ctrl+c",command:"timeline.clip.copy"},{key:"ctrl+v",command:"timeline.clip.paste"},{key:"ctrl+d",command:"timeline.clip.duplicate"}],Dn=function(e,t,n){const r=!Array.isArray(e),s=r?[e]:e,o=t.length<2;return{subscribe:Ke(n,(e=>{let n=!1;const i=[];let l=0,c=T;const a=()=>{if(l)return;c();const n=t(r?i[0]:i,e);o?e(n):c=P(n)?n:T},u=s.map(((e,t)=>C(e,(e=>{i[t]=e,l&=~(1<<t),n&&a()}),(()=>{l|=1<<t}))));return n=!0,a(),function(){L(u),c()}})).subscribe}}(Sn,(e=>[...e.userShortcuts,...Cn]));function jn(e){let t,n;const r=e[1].default,s=_(r,e,e[0],null);return{c(){t=Q("div"),s&&s.c(),ie(t,"class","svelte-q6b4ds")},m(e,r){K(e,t,r),s&&s.m(t,null),n=!0},p(e,[t]){s&&s.p&&1&t&&z(s,r,e,e[0],t,null,null)},i(e){n||(_e(s,e),n=!0)},o(e){Ge(s,e),n=!1},d(e){e&&J(t),s&&s.d(e)}}}function _n(e,t,n){let{$$slots:r={},$$scope:s}=t;return e.$$set=e=>{"$$scope"in e&&n(0,s=e.$$scope)},[s,r]}class Gn extends qe{constructor(e){super(),He(this,e,_n,jn,S,{})}}function zn(e){let t,n,r,s,o;return{c(){t=Q("div"),n=Q("div"),ie(n,"class","hotspot svelte-1fexp5j"),ie(n,"style",r="color: "+e[1]),he(n,"horizontal","row"===e[0]),he(n,"vertical","column"===e[0]),ie(t,"class","split-bar svelte-1fexp5j")},m(r,i){K(r,t,i),Y(t,n),s||(o=se(n,"pointerdown",oe(e[2])),s=!0)},p(e,[t]){2&t&&r!==(r="color: "+e[1])&&ie(n,"style",r),1&t&&he(n,"horizontal","row"===e[0]),1&t&&he(n,"vertical","column"===e[0])},i:T,o:T,d(e){e&&J(t),s=!1,o()}}}function Xn(e,t,n){let{position:r}=t,{factor:s=1}=t,{direction:o="column"}=t,{reverse:i=!1}=t,{snaps:l}=t,{snapdist:c=10}=t,{min:a}=t,{max:u}=t,{color:p="var(--color-foreground-2)"}=t;return e.$$set=e=>{"position"in e&&n(3,r=e.position),"factor"in e&&n(4,s=e.factor),"direction"in e&&n(0,o=e.direction),"reverse"in e&&n(5,i=e.reverse),"snaps"in e&&n(6,l=e.snaps),"snapdist"in e&&n(7,c=e.snapdist),"min"in e&&n(8,a=e.min),"max"in e&&n(9,u=e.max),"color"in e&&n(1,p=e.color)},e.$$.update=()=>{if(264&e.$$.dirty&&a&&n(3,r=Math.max(a,r)),520&e.$$.dirty&&u&&n(3,r=Math.min(u,r)),200&e.$$.dirty&&l){const e=l.filter((e=>Math.abs(r-e)<c));if(e.length){const t=e.reduce(((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e));n(3,r=t)}}},[o,p,function(e){if(0!==e.button)return;const t=i?-1:1,l=r,c=e.clientX,a=e.clientY;this.onpointermove=e=>{let i;"column"===o?i=(e.clientY-a)*s*t:"row"===o&&(i=(e.clientX-c)*s*t),n(3,r=l+i)},this.onpointerup=e=>{this.onpointermove=null,this.onpointerup=null,this.releasePointerCapture(e.pointerId)},this.setPointerCapture(e.pointerId)},r,s,i,l,c,a,u]}class Bn extends qe{constructor(e){super(),He(this,e,Xn,zn,S,{position:3,factor:4,direction:0,reverse:5,snaps:6,snapdist:7,min:8,max:9,color:1})}}function Fn(e){let t,n,r,s,o,i,l;const c=e[8].default,a=_(c,e,e[7],null);function u(t){e[9].call(null,t)}let p={direction:e[1],reverse:e[2],min:e[3],max:e[4],snaps:e[5],snapdist:e[6]};return void 0!==e[0]&&(p.position=e[0]),s=new Bn({props:p}),we.push((()=>Fe(s,"position",u))),{c(){t=Q("div"),a&&a.c(),n=ne(),r=Q("div"),We(s.$$.fragment),ie(r,"class","splitter svelte-120rodx"),ie(t,"class","split-pane svelte-120rodx"),ie(t,"style",i=`--split-pos: ${e[0]}px`),he(t,"vertical","column"===e[1]),he(t,"horizontal","row"===e[1]),he(t,"reverse",e[2])},m(e,o){K(e,t,o),a&&a.m(t,null),Y(t,n),Y(t,r),Ue(s,r,null),l=!0},p(e,[n]){a&&a.p&&128&n&&z(a,c,e,e[7],n,null,null);const r={};2&n&&(r.direction=e[1]),4&n&&(r.reverse=e[2]),8&n&&(r.min=e[3]),16&n&&(r.max=e[4]),32&n&&(r.snaps=e[5]),64&n&&(r.snapdist=e[6]),!o&&1&n&&(o=!0,r.position=e[0],Ne((()=>o=!1))),s.$set(r),(!l||1&n&&i!==(i=`--split-pos: ${e[0]}px`))&&ie(t,"style",i),2&n&&he(t,"vertical","column"===e[1]),2&n&&he(t,"horizontal","row"===e[1]),4&n&&he(t,"reverse",e[2])},i(e){l||(_e(a,e),_e(s.$$.fragment,e),l=!0)},o(e){Ge(a,e),Ge(s.$$.fragment,e),l=!1},d(e){e&&J(t),a&&a.d(e),Ve(s)}}}function Wn(e,t,n){let{$$slots:r={},$$scope:s}=t,{direction:o="column"}=t,{splitpos:i}=t,{reverse:l=!1}=t,{min:c=100}=t,{max:a}=t,{snaps:u}=t,{snapdist:p}=t;return e.$$set=e=>{"direction"in e&&n(1,o=e.direction),"splitpos"in e&&n(0,i=e.splitpos),"reverse"in e&&n(2,l=e.reverse),"min"in e&&n(3,c=e.min),"max"in e&&n(4,a=e.max),"snaps"in e&&n(5,u=e.snaps),"snapdist"in e&&n(6,p=e.snapdist),"$$scope"in e&&n(7,s=e.$$scope)},[i,o,l,c,a,u,p,s,r,function(e){i=e,n(0,i)}]}class Un extends qe{constructor(e){super(),He(this,e,Wn,Fn,S,{direction:1,splitpos:0,reverse:2,min:3,max:4,snaps:5,snapdist:6})}}function Vn(e){return{c:T,m:T,p:T,d:T}}function Hn(e){let t,n;return{c(){t=ee("path"),ie(t,"d",n=e[2]),ie(t,"fill",e[0]),ie(t,"class","svelte-hig2lj")},m(e,n){K(e,t,n)},p(e,r){4&r&&n!==(n=e[2])&&ie(t,"d",n),1&r&&ie(t,"fill",e[0])},d(e){e&&J(t)}}}function qn(e){return{c:T,m:T,p:T,d:T}}function Yn(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:qn,then:Hn,catch:Vn,value:2};return ze(n=e[2],r),{c(){t=ee("svg"),r.block.c(),ie(t,"width",e[1]),ie(t,"height",e[1]),ie(t,"viewBox","0 0 24 24")},m(e,n){K(e,t,n),r.block.m(t,r.anchor=null),r.mount=()=>t,r.anchor=null},p(s,[o]){if(e=s,r.ctx=e,4&o&&n!==(n=e[2])&&ze(n,r));else{const t=e.slice();t[2]=r.resolved,r.block.p(t,o)}2&o&&ie(t,"width",e[1]),2&o&&ie(t,"height",e[1])},i:T,o:T,d(e){e&&J(t),r.block.d(),r.token=null,r=null}}}var Kn=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const Jn={},Zn=new DOMParser;function Qn(e){return Jn[e]||(Jn[e]=function(e){return Kn(this,void 0,void 0,(function*(){const t=yield fetch(`icons/${e}.svg`),n=yield t.text();return Zn.parseFromString(n,"image/svg+xml").getElementsByTagName("path")[0].getAttribute("d")}))}(e)),Jn[e]}function er(e,t,n){let r,{name:s}=t,{preload:o=[]}=t,{color:i="currentColor"}=t,{size:l="1em"}=t;return o.forEach(Qn),e.$$set=e=>{"name"in e&&n(3,s=e.name),"preload"in e&&n(4,o=e.preload),"color"in e&&n(0,i=e.color),"size"in e&&n(1,l=e.size)},e.$$.update=()=>{8&e.$$.dirty&&n(2,r=Qn(s))},[i,l,r,s,o]}class tr extends qe{constructor(e){super(),He(this,e,er,Yn,S,{name:3,preload:4,color:0,size:1})}}function nr(e){let t,n,r,s,o;const i=e[2].default,l=_(i,e,e[1],null);return{c(){t=Q("button"),l&&l.c(),ie(t,"aria-pressed",n=e[0]&&""+e[0]),ie(t,"class","svelte-s2dcx0")},m(n,i){K(n,t,i),l&&l.m(t,null),r=!0,s||(o=se(t,"click",e[3]),s=!0)},p(e,[s]){l&&l.p&&2&s&&z(l,i,e,e[1],s,null,null),(!r||1&s&&n!==(n=e[0]&&""+e[0]))&&ie(t,"aria-pressed",n)},i(e){r||(_e(l,e),r=!0)},o(e){Ge(l,e),r=!1},d(e){e&&J(t),l&&l.d(e),s=!1,o()}}}function rr(e,t,n){let{$$slots:r={},$$scope:s}=t,{pressed:o}=t;return e.$$set=e=>{"pressed"in e&&n(0,o=e.pressed),"$$scope"in e&&n(1,s=e.$$scope)},[o,s,r,function(t){ye(e,t)}]}class sr extends qe{constructor(e){super(),He(this,e,rr,nr,S,{pressed:0})}}function or(e){let t,n,r,s,o,i;return n=new tr({props:{name:e[0]}}),{c(){t=Q("button"),We(n.$$.fragment),ie(t,"role","tab"),ie(t,"tabindex",r=e[1]?0:-1),ie(t,"class","svelte-1mgzikr"),he(t,"selected",e[1])},m(r,l){K(r,t,l),Ue(n,t,null),s=!0,o||(i=se(t,"click",e[2]),o=!0)},p(e,[o]){const i={};1&o&&(i.name=e[0]),n.$set(i),(!s||2&o&&r!==(r=e[1]?0:-1))&&ie(t,"tabindex",r),2&o&&he(t,"selected",e[1])},i(e){s||(_e(n.$$.fragment,e),s=!0)},o(e){Ge(n.$$.fragment,e),s=!1},d(e){e&&J(t),Ve(n),o=!1,i()}}}function ir(e,t,n){let{icon:r}=t,{selected:s=!1}=t;return e.$$set=e=>{"icon"in e&&n(0,r=e.icon),"selected"in e&&n(1,s=e.selected)},[r,s,function(t){ye(e,t)}]}class lr extends qe{constructor(e){super(),He(this,e,ir,or,S,{icon:0,selected:1})}}function cr(e,t,n){const r=e.slice();return r[3]=t[n],r}function ar(e){let t,n;return t=new lr({props:{icon:e[3].icon,selected:e[0]===e[3].name}}),t.$on("click",(function(...t){return e[2](e[3],...t)})),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(n,r){e=n;const s={};2&r&&(s.icon=e[3].icon),3&r&&(s.selected=e[0]===e[3].name),t.$set(s)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function ur(e){let t,n,r=e[1],s=[];for(let t=0;t<r.length;t+=1)s[t]=ar(cr(e,r,t));const o=e=>Ge(s[e],1,1,(()=>{s[e]=null}));return{c(){t=Q("div");for(let e=0;e<s.length;e+=1)s[e].c();ie(t,"class","tabbed-control svelte-cdus64"),ie(t,"role","tablist")},m(e,r){K(e,t,r);for(let e=0;e<s.length;e+=1)s[e].m(t,null);n=!0},p(e,[n]){if(3&n){let i;for(r=e[1],i=0;i<r.length;i+=1){const o=cr(e,r,i);s[i]?(s[i].p(o,n),_e(s[i],1)):(s[i]=ar(o),s[i].c(),_e(s[i],1),s[i].m(t,null))}for(De(),i=r.length;i<s.length;i+=1)o(i);je()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)_e(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)Ge(s[e]);n=!1},d(e){e&&J(t),Z(s,e)}}}function pr(e,t,n){let{tabs:r}=t,{selected:s}=t;return e.$$set=e=>{"tabs"in e&&n(1,r=e.tabs),"selected"in e&&n(0,s=e.selected)},[s,r,e=>n(0,s=e.name)]}class dr extends qe{constructor(e){super(),He(this,e,pr,ur,S,{tabs:1,selected:0})}}function fr(e){let t,n;return t=new tr({props:{name:e[1],color:e[2]}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.name=e[1]),4&n&&(r.color=e[2]),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function $r(e){let t,n;return t=new sr({props:{pressed:e[0]?"true":"false",$$slots:{default:[fr]},$$scope:{ctx:e}}}),t.$on("click",e[3]),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.pressed=e[0]?"true":"false"),22&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function hr(e,t,n){let r,{icon:s}=t,{selected:o=!1}=t;return e.$$set=e=>{"icon"in e&&n(1,s=e.icon),"selected"in e&&n(0,o=e.selected)},e.$$.update=()=>{1&e.$$.dirty&&n(2,r=o?"var(--color-accent)":"var(--color-foreground-2)")},[o,s,r,function(){n(0,o=!o)}]}class mr extends qe{constructor(e){super(),He(this,e,hr,$r,S,{icon:1,selected:0})}}function gr(e){let t,n,r,s,o,i,l;return s=new tr({props:{name:"arrow/unfold_more"}}),{c(){t=Q("div"),n=Q("input"),r=ne(),We(s.$$.fragment),ie(n,"min",e[0]),ie(n,"max",e[1]),ie(n,"type","number"),n.readOnly=e[2],ie(n,"class","svelte-f94908"),ie(t,"class","tempo-root svelte-f94908")},m(c,a){K(c,t,a),Y(t,n),ae(n,e[3]),Y(t,r),Ue(s,t,null),o=!0,i||(l=[se(n,"input",e[9]),se(n,"blur",e[5]),se(n,"dblclick",e[4]),se(n,"keydown",vr),se(t,"wheel",e[6]),se(t,"pointerdown",e[7])],i=!0)},p(e,[t]){(!o||1&t)&&ie(n,"min",e[0]),(!o||2&t)&&ie(n,"max",e[1]),(!o||4&t)&&(n.readOnly=e[2]),8&t&&le(n.value)!==e[3]&&ae(n,e[3])},i(e){o||(_e(s.$$.fragment,e),o=!0)},o(e){Ge(s.$$.fragment,e),o=!1},d(e){e&&J(t),Ve(s),i=!1,L(l)}}}function vr(e){"Enter"===e.key&&this.blur()}function yr(e,t,n){let r;j(e,Pn,(e=>n(10,r=e)));var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};let o,{value:i}=t,{min:l=.01}=t,{max:c=999.99}=t,a=!0;return e.$$set=e=>{"value"in e&&n(8,i=e.value),"min"in e&&n(0,l=e.min),"max"in e&&n(1,c=e.max)},e.$$.update=()=>{259&e.$$.dirty&&n(8,i=Math.min(c,Math.max(l,i))),256&e.$$.dirty&&n(3,o=i.toFixed(2))},[l,c,a,o,function(){return s(this,void 0,void 0,(function*(){n(2,a=!1),yield Te(),this.focus(),this.select()}))},function(){return s(this,void 0,void 0,(function*(){if(["number","string"].includes(typeof o)){const e=Number(o);Number.isFinite(e)&&n(8,i=e)}else n(8,i+=1),n(8,i-=1);n(2,a=!0)}))},function(e){const t=Math.sign(e.deltaY),r=e.shiftKey?2:1;n(8,i-=t*r)},function(e){if(0!==e.button)return;const t=r.usePointerLock,s=i;let o=0;this.onpointermove=e=>{o+=e.movementY,n(8,i=s-Math.round(o/4))},this.onpointerup=e=>{this.onpointermove=null,this.onpointerup=null,t?document.exitPointerLock():this.releasePointerCapture(e.pointerId)},t?this.requestPointerLock():this.setPointerCapture(e.pointerId)},i,function(){o=le(this.value),n(3,o),n(8,i),n(1,c),n(0,l)}]}class xr extends qe{constructor(e){super(),He(this,e,yr,gr,S,{value:8,min:0,max:1})}}function wr(e){let t,n;return t=new tr({props:{name:e[0],preload:["media/pause_circle_filled","media/play_arrow"]}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.name=e[0]),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function Er(e){let t,n;return t=new sr({props:{$$slots:{default:[wr]},$$scope:{ctx:e}}}),t.$on("click",e[1]),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,[n]){const r={};33&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function br(e,t,n){let r,s;j(e,Ze,(e=>n(3,r=e))),j(e,Je,(e=>n(4,s=e)));let o,i=r.playing;return e.$$.update=()=>{4&e.$$.dirty&&n(0,o=i?"media/pause_circle_filled":"media/play_arrow")},[o,function(){X(Ze,r=r.toggle(s),r),n(2,i=r.playing)}]}class kr extends qe{constructor(e){super(),He(this,e,br,Er,S,{})}}function Rr(e){let t,n;return t=new tr({props:{name:"basic/stopwatch"}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p:T,i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function Ir(e){let t,n;return t=new tr({props:{name:"misc/dot_05_xl"}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p:T,i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function Tr(e){let t,n;return t=new tr({props:{name:"media/skip_previous"}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p:T,i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function Ar(e){let t,n;return t=new tr({props:{name:"basic/share"}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p:T,i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function Nr(e){let t,n,r,s,o,i,l,c,a,u,p,d,f,$,h,m,g,v,y,x,w,E,b,k;function R(t){e[2].call(null,t)}s=new sr({props:{$$slots:{default:[Rr]},$$scope:{ctx:e}}});let I={};function T(t){e[3].call(null,t)}void 0!==e[0].tempo&&(I.value=e[0].tempo),i=new xr({props:I}),we.push((()=>Fe(i,"value",R))),a=new sr({props:{$$slots:{default:[Ir]},$$scope:{ctx:e}}}),f=new sr({props:{$$slots:{default:[Tr]},$$scope:{ctx:e}}}),h=new kr({}),g=new mr({props:{icon:"media/repeat",selected:!0}});let A={tabs:[{icon:"edit/list_ul",name:Nn.Timeline},{icon:"basic/path",name:Nn.Graph}]};return void 0!==e[1].tracklistMode&&(A.selected=e[1].tracklistMode),y=new dr({props:A}),we.push((()=>Fe(y,"selected",T))),b=new sr({props:{$$slots:{default:[Ar]},$$scope:{ctx:e}}}),{c(){t=Q("nav"),n=Q("div"),r=Q("div"),We(s.$$.fragment),o=ne(),We(i.$$.fragment),c=ne(),We(a.$$.fragment),u=ne(),p=Q("div"),d=Q("div"),We(f.$$.fragment),$=ne(),We(h.$$.fragment),m=ne(),We(g.$$.fragment),v=ne(),We(y.$$.fragment),w=ne(),E=Q("div"),We(b.$$.fragment),ie(r,"class","subgroup svelte-110nc33"),ie(n,"class","group left svelte-110nc33"),ie(d,"class","subgroup svelte-110nc33"),ie(p,"class","group center svelte-110nc33"),ie(E,"class","group right svelte-110nc33"),ie(t,"class","svelte-110nc33")},m(e,l){K(e,t,l),Y(t,n),Y(n,r),Ue(s,r,null),Y(r,o),Ue(i,r,null),Y(n,c),Ue(a,n,null),Y(t,u),Y(t,p),Y(p,d),Ue(f,d,null),Y(d,$),Ue(h,d,null),Y(d,m),Ue(g,d,null),Y(p,v),Ue(y,p,null),Y(t,w),Y(t,E),Ue(b,E,null),k=!0},p(e,[t]){const n={};16&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n);const r={};!l&&1&t&&(l=!0,r.value=e[0].tempo,Ne((()=>l=!1))),i.$set(r);const o={};16&t&&(o.$$scope={dirty:t,ctx:e}),a.$set(o);const c={};16&t&&(c.$$scope={dirty:t,ctx:e}),f.$set(c);const u={};!x&&2&t&&(x=!0,u.selected=e[1].tracklistMode,Ne((()=>x=!1))),y.$set(u);const p={};16&t&&(p.$$scope={dirty:t,ctx:e}),b.$set(p)},i(e){k||(_e(s.$$.fragment,e),_e(i.$$.fragment,e),_e(a.$$.fragment,e),_e(f.$$.fragment,e),_e(h.$$.fragment,e),_e(g.$$.fragment,e),_e(y.$$.fragment,e),_e(b.$$.fragment,e),k=!0)},o(e){Ge(s.$$.fragment,e),Ge(i.$$.fragment,e),Ge(a.$$.fragment,e),Ge(f.$$.fragment,e),Ge(h.$$.fragment,e),Ge(g.$$.fragment,e),Ge(y.$$.fragment,e),Ge(b.$$.fragment,e),k=!1},d(e){e&&J(t),Ve(s),Ve(i),Ve(a),Ve(f),Ve(h),Ve(g),Ve(y),Ve(b)}}}function Or(e,t,n){let r,s;return j(e,Je,(e=>n(0,r=e))),j(e,Pn,(e=>n(1,s=e))),[r,s,function(e){r.tempo=e,Je.set(r)},function(e){s.tracklistMode=e,Pn.set(s)}]}class Mr extends qe{constructor(e){super(),He(this,e,Or,Nr,S,{})}}function Lr(e,t){return e.addEventListener("pointerdown",(function(e){if("number"==typeof t.button&&e.button!==t.button||Array.isArray(t.button)&&!t.button.includes(e.button))return;!1!==t.stopPropagation&&e.stopImmediatePropagation(),e.preventDefault();const n={x:e.clientX,y:e.clientY},r=Object.assign({},D(t.offset)),s=t.element||this,o=!1!==t.capture,i=e=>{const s=e.clientX-n.x,o=e.clientY-n.y;t.relative&&(n.x=e.clientX,n.y=e.clientY);const i=t.invert?-1:1;t.offset.set({x:r.x+s*i,y:r.y+o*i})},l=e=>{t.relative&&t.offset.set({x:r.x,y:r.y}),s.removeEventListener("pointermove",i),s.removeEventListener("pointerup",l),o&&s.releasePointerCapture(e.pointerId),this.dispatchEvent(new CustomEvent("dragend"))};s.addEventListener("pointermove",i),s.addEventListener("pointerup",l),o&&s.setPointerCapture(e.pointerId),this.dispatchEvent(new CustomEvent("dragstart"))})),{update(e){t=e}}}function Pr(e){let t;return{c(){t=Q("div"),ie(t,"class","flex-space svelte-1x20rp6")},m(e,n){K(e,t,n)},p:T,i:T,o:T,d(e){e&&J(t)}}}class Sr extends qe{constructor(e){super(),He(this,e,null,Pr,S,{})}}function Cr(e){let t,n,r;const s=e[8].default,o=_(s,e,e[7],null);return{c(){t=Q("div"),o&&o.c(),ie(t,"class","stack svelte-1ytgh4e"),ie(t,"style",n=`\n    padding: ${e[4]}px ${e[3]}px;\n    gap: ${e[2]}px;\n    align-items: ${{start:"flex-start",center:"center",end:"flex-end",stretch:"stretch"}[e[1]]};\n  `),he(t,"inline",e[5]),he(t,"reverse",e[6]),he(t,"horizontal","horizontal"===e[0]),he(t,"vertical","vertical"===e[0])},m(e,n){K(e,t,n),o&&o.m(t,null),r=!0},p(e,[i]){o&&o.p&&128&i&&z(o,s,e,e[7],i,null,null),(!r||30&i&&n!==(n=`\n    padding: ${e[4]}px ${e[3]}px;\n    gap: ${e[2]}px;\n    align-items: ${{start:"flex-start",center:"center",end:"flex-end",stretch:"stretch"}[e[1]]};\n  `))&&ie(t,"style",n),32&i&&he(t,"inline",e[5]),64&i&&he(t,"reverse",e[6]),1&i&&he(t,"horizontal","horizontal"===e[0]),1&i&&he(t,"vertical","vertical"===e[0])},i(e){r||(_e(o,e),r=!0)},o(e){Ge(o,e),r=!1},d(e){e&&J(t),o&&o.d(e)}}}function Dr(e,t=1){e.style.flexGrow=""+t}function jr(e,t,n){let{$$slots:r={},$$scope:s}=t,{dir:o="horizontal"}=t,{align:i="stretch"}=t,{spacing:l=0}=t,{hpad:c=0}=t,{vpad:a=0}=t,{inline:u=!1}=t,{reverse:p=!1}=t;return e.$$set=e=>{"dir"in e&&n(0,o=e.dir),"align"in e&&n(1,i=e.align),"spacing"in e&&n(2,l=e.spacing),"hpad"in e&&n(3,c=e.hpad),"vpad"in e&&n(4,a=e.vpad),"inline"in e&&n(5,u=e.inline),"reverse"in e&&n(6,p=e.reverse),"$$scope"in e&&n(7,s=e.$$scope)},[o,i,l,c,a,u,p,s,r]}class _r extends qe{constructor(e){super(),He(this,e,jr,Cr,S,{dir:0,align:1,spacing:2,hpad:3,vpad:4,inline:5,reverse:6})}}function Gr(e){let t;const n=e[6].default,r=_(n,e,e[7],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){r&&r.p&&128&t&&z(r,n,e,e[7],t,null,null)},i(e){t||(_e(r,e),t=!0)},o(e){Ge(r,e),t=!1},d(e){r&&r.d(e)}}}function zr(e){let t,n;return t=new _r({props:{dir:"vertical",align:e[0],hpad:e[1],vpad:e[2],inline:e[3],reverse:e[4],spacing:e[5],$$slots:{default:[Gr]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.align=e[0]),2&n&&(r.hpad=e[1]),4&n&&(r.vpad=e[2]),8&n&&(r.inline=e[3]),16&n&&(r.reverse=e[4]),32&n&&(r.spacing=e[5]),128&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function Xr(e,t,n){let{$$slots:r={},$$scope:s}=t,{align:o="stretch"}=t,{hpad:i=0}=t,{vpad:l=0}=t,{inline:c=!1}=t,{reverse:a=!1}=t,{spacing:u=0}=t;return e.$$set=e=>{"align"in e&&n(0,o=e.align),"hpad"in e&&n(1,i=e.hpad),"vpad"in e&&n(2,l=e.vpad),"inline"in e&&n(3,c=e.inline),"reverse"in e&&n(4,a=e.reverse),"spacing"in e&&n(5,u=e.spacing),"$$scope"in e&&n(7,s=e.$$scope)},[o,i,l,c,a,u,r,s]}class Br extends qe{constructor(e){super(),He(this,e,Xr,zr,S,{align:0,hpad:1,vpad:2,inline:3,reverse:4,spacing:5})}}function Fr(e){let t,n,r,s,o;return n=new tr({props:{name:"edit/plus"}}),{c(){t=Q("button"),We(n.$$.fragment),ie(t,"class","new-track-head svelte-itszkv")},m(i,l){K(i,t,l),Ue(n,t,null),r=!0,s||(o=se(t,"click",e[0]),s=!0)},p:T,i(e){r||(_e(n.$$.fragment,e),r=!0)},o(e){Ge(n.$$.fragment,e),r=!1},d(e){e&&J(t),Ve(n),s=!1,o()}}}function Wr(e,t,n){let r;j(e,Je,(e=>n(1,r=e)));const s=ve();return[function(){const e=new x;X(Je,r.tracks=[...r.tracks,e],r),s("newtrack",e)}]}class Ur extends qe{constructor(e){super(),He(this,e,Wr,Fr,S,{})}}function Vr(e){let t;const n=e[6].default,r=_(n,e,e[7],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){r&&r.p&&128&t&&z(r,n,e,e[7],t,null,null)},i(e){t||(_e(r,e),t=!0)},o(e){Ge(r,e),t=!1},d(e){r&&r.d(e)}}}function Hr(e){let t,n;return t=new _r({props:{dir:"horizontal",align:e[0],hpad:e[1],vpad:e[2],inline:e[3],reverse:e[4],spacing:e[5],$$slots:{default:[Vr]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.align=e[0]),2&n&&(r.hpad=e[1]),4&n&&(r.vpad=e[2]),8&n&&(r.inline=e[3]),16&n&&(r.reverse=e[4]),32&n&&(r.spacing=e[5]),128&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function qr(e,t,n){let{$$slots:r={},$$scope:s}=t,{align:o="stretch"}=t,{hpad:i=0}=t,{vpad:l=0}=t,{inline:c=!1}=t,{reverse:a=!1}=t,{spacing:u=0}=t;return e.$$set=e=>{"align"in e&&n(0,o=e.align),"hpad"in e&&n(1,i=e.hpad),"vpad"in e&&n(2,l=e.vpad),"inline"in e&&n(3,c=e.inline),"reverse"in e&&n(4,a=e.reverse),"spacing"in e&&n(5,u=e.spacing),"$$scope"in e&&n(7,s=e.$$scope)},[o,i,l,c,a,u,r,s]}class Yr extends qe{constructor(e){super(),He(this,e,qr,Hr,S,{align:0,hpad:1,vpad:2,inline:3,reverse:4,spacing:5})}}function Kr(e){let t,n,r,s,o,i,l,c,a,u,p,d,f;return{c(){t=Q("label"),n=Q("input"),r=ne(),s=ee("svg"),o=ee("circle"),l=ee("g"),c=ee("circle"),ie(n,"type","checkbox"),n.hidden=!0,ie(o,"cx","50%"),ie(o,"cy","50%"),ie(o,"r",i=e[1]/2-.5),ie(o,"stroke",e[2]),ie(o,"stroke-width","1px"),ie(o,"fill","none"),ie(c,"cx","0%"),ie(c,"cy","0%"),ie(c,"fill",e[2]),ie(c,"r",a=e[0]?e[1]/4:0),ie(c,"opacity",u=e[0]?1:0),ue(c,"transition","r var(--anim-short), opacity var(--anim-short)"),ie(l,"transform",p=`translate(${e[1]/2} ${e[1]/2})`),ie(s,"width",e[1]),ie(s,"height",e[1]),ie(s,"class","svelte-1s86c47"),ie(t,"class","checkbox svelte-1s86c47")},m(i,a){K(i,t,a),Y(t,n),n.checked=e[0],Y(t,r),Y(t,s),Y(s,o),Y(s,l),Y(l,c),d||(f=[se(n,"change",e[5]),se(t,"contextmenu",e[3]),se(t,"pointerdown",oe(e[4]))],d=!0)},p(e,[t]){1&t&&(n.checked=e[0]),2&t&&i!==(i=e[1]/2-.5)&&ie(o,"r",i),4&t&&ie(o,"stroke",e[2]),4&t&&ie(c,"fill",e[2]),3&t&&a!==(a=e[0]?e[1]/4:0)&&ie(c,"r",a),1&t&&u!==(u=e[0]?1:0)&&ie(c,"opacity",u),2&t&&p!==(p=`translate(${e[1]/2} ${e[1]/2})`)&&ie(l,"transform",p),2&t&&ie(s,"width",e[1]),2&t&&ie(s,"height",e[1])},i:T,o:T,d(e){e&&J(t),d=!1,L(f)}}}function Jr(e,t,n){let{checked:r=!1}=t,{size:s=12}=t,{color:o="var(--color-accent)"}=t;return e.$$set=e=>{"checked"in e&&n(0,r=e.checked),"size"in e&&n(1,s=e.size),"color"in e&&n(2,o=e.color)},[r,s,o,function(t){ye(e,t)},function(t){ye(e,t)},function(){r=this.checked,n(0,r)}]}class Zr extends qe{constructor(e){super(),He(this,e,Jr,Kr,S,{checked:0,size:1,color:2})}}function Qr(e){let t,n,r,s,o,i,l,c,a,u,p,d,f,$,h,m,g,v,y,x,w,E,b,k,R;return{c(){t=Q("label"),n=Q("input"),o=ne(),i=ee("svg"),l=ee("circle"),a=ee("g"),u=ee("g"),p=ee("line"),m=ee("path"),y=ee("path"),ie(n,"type","number"),n.hidden=!0,ie(n,"id",e[1]),ie(n,"step",e[8]),n.disabled=e[5],ie(n,"min",r=e[9]&&e[6]),ie(n,"max",s=e[9]&&e[7]),ie(l,"opacity","0.1"),ie(l,"cx","50%"),ie(l,"cy","50%"),ie(l,"r",c=e[4]/2),ie(l,"fill","currentColor"),ie(p,"opacity",d=e[15]?.25:1),ue(p,"transition","opacity var(--anim-short)"),ie(p,"x1","0"),ie(p,"y1",f=4-e[4]/2),ie(p,"x2","0"),ie(p,"y2",$=6-e[4]/2),ie(u,"transform",h=`translate(${e[4]/2} ${e[4]/2}) rotate(${270*e[10]-135})`),ie(m,"opacity","0.25"),ie(m,"transform",g=`translate(${e[4]/2} ${e[4]/2}) rotate(-135)`),ie(m,"d",v=`\n          M 0,${1-e[4]/2}\n          A ${e[4]/2-1} ${e[4]/2-1} 0 1 1 ${1-e[4]/2},0\n        `),ie(y,"transform",x=`translate(${e[4]/2} ${e[4]/2}) rotate(-135)`),ie(y,"opacity",w=Math.abs(e[11]-e[12])<.001?0:1),ue(y,"transition","opacity var(--anim-short)"),ie(y,"d",E=`\n          M ${Math.cos(e[11])*(1-e[4]/2)}\n            ${Math.sin(e[11])*(1-e[4]/2)}\n          A ${e[4]/2-1} ${e[4]/2-1} 0\n            ${e[13]?1:0} ${e[14]?1:0}\n            ${Math.cos(e[12])*(1-e[4]/2)}\n            ${Math.sin(e[12])*(1-e[4]/2)}\n        `),ie(a,"stroke","currentColor"),ie(a,"stroke-width","2"),ie(a,"stroke-linecap","round"),ie(a,"fill","none"),ie(i,"width",e[4]),ie(i,"height",e[4]),ie(t,"class","knob svelte-j5ck6w"),ie(t,"style",b=`\n    color: ${e[5]?e[3]:e[2]};\n  `)},m(r,s){K(r,t,s),Y(t,n),ae(n,e[0]),Y(t,o),Y(t,i),Y(i,l),Y(i,a),Y(a,u),Y(u,p),Y(a,m),Y(a,y),k||(R=[se(n,"input",e[18]),se(i,"pointerdown",oe(e[16]))],k=!0)},p(e,[o]){2&o&&ie(n,"id",e[1]),256&o&&ie(n,"step",e[8]),32&o&&(n.disabled=e[5]),576&o&&r!==(r=e[9]&&e[6])&&ie(n,"min",r),640&o&&s!==(s=e[9]&&e[7])&&ie(n,"max",s),1&o&&le(n.value)!==e[0]&&ae(n,e[0]),16&o&&c!==(c=e[4]/2)&&ie(l,"r",c),32768&o&&d!==(d=e[15]?.25:1)&&ie(p,"opacity",d),16&o&&f!==(f=4-e[4]/2)&&ie(p,"y1",f),16&o&&$!==($=6-e[4]/2)&&ie(p,"y2",$),1040&o&&h!==(h=`translate(${e[4]/2} ${e[4]/2}) rotate(${270*e[10]-135})`)&&ie(u,"transform",h),16&o&&g!==(g=`translate(${e[4]/2} ${e[4]/2}) rotate(-135)`)&&ie(m,"transform",g),16&o&&v!==(v=`\n          M 0,${1-e[4]/2}\n          A ${e[4]/2-1} ${e[4]/2-1} 0 1 1 ${1-e[4]/2},0\n        `)&&ie(m,"d",v),16&o&&x!==(x=`translate(${e[4]/2} ${e[4]/2}) rotate(-135)`)&&ie(y,"transform",x),6144&o&&w!==(w=Math.abs(e[11]-e[12])<.001?0:1)&&ie(y,"opacity",w),30736&o&&E!==(E=`\n          M ${Math.cos(e[11])*(1-e[4]/2)}\n            ${Math.sin(e[11])*(1-e[4]/2)}\n          A ${e[4]/2-1} ${e[4]/2-1} 0\n            ${e[13]?1:0} ${e[14]?1:0}\n            ${Math.cos(e[12])*(1-e[4]/2)}\n            ${Math.sin(e[12])*(1-e[4]/2)}\n        `)&&ie(y,"d",E),16&o&&ie(i,"width",e[4]),16&o&&ie(i,"height",e[4]),44&o&&b!==(b=`\n    color: ${e[5]?e[3]:e[2]};\n  `)&&ie(t,"style",b)},i:T,o:T,d(e){e&&J(t),k=!1,L(R)}}}function es(e,t,n){let r;j(e,Pn,(e=>n(19,r=e)));let s,o,i,l,c,a,{id:u}=t,{color:p="var(--color-accent)"}=t,{disabledColor:d="var(--color-foreground-1)"}=t,{size:f=20}=t,{type:$="absolute"}=t,{value:h=0}=t,{disabled:m=!1}=t,{min:g={absolute:0,relative:-1}[$]}=t,{max:v={absolute:1,relative:1}[$]}=t,{step:y}=t,{clamp:x=!0}=t;return e.$$set=e=>{"id"in e&&n(1,u=e.id),"color"in e&&n(2,p=e.color),"disabledColor"in e&&n(3,d=e.disabledColor),"size"in e&&n(4,f=e.size),"type"in e&&n(17,$=e.type),"value"in e&&n(0,h=e.value),"disabled"in e&&n(5,m=e.disabled),"min"in e&&n(6,g=e.min),"max"in e&&n(7,v=e.max),"step"in e&&n(8,y=e.step),"clamp"in e&&n(9,x=e.clamp)},e.$$.update=()=>{705&e.$$.dirty&&x&&n(0,h=Math.min(v,Math.max(g,h))),193&e.$$.dirty&&n(10,s=(h-g)/(v-g)),131072&e.$$.dirty&&n(11,o=("absolute"===$?90:225)*(Math.PI/180)),1024&e.$$.dirty&&n(12,i=(90+270*s)*(Math.PI/180)),6144&e.$$.dirty&&n(13,l=i-o>Math.PI),6144&e.$$.dirty&&n(14,c=i>o),1&e.$$.dirty&&n(15,a=0===h)},[h,u,p,d,f,m,g,v,y,x,s,o,i,l,c,a,function(e){if(0!==e.button)return;const t=r.usePointerLock;this.onpointermove=e=>{n(0,h-=e.movementY/50*(v-g)*.5)},this.onpointerup=e=>{this.onpointermove=null,this.onpointerup=null,t?document.exitPointerLock():this.releasePointerCapture(e.pointerId)},t?this.requestPointerLock():this.setPointerCapture(e.pointerId)},$,function(){h=le(this.value),n(0,h),n(9,x),n(7,v),n(6,g)}]}class ts extends qe{constructor(e){super(),He(this,e,es,Qr,S,{id:1,color:2,disabledColor:3,size:4,type:17,value:0,disabled:5,min:6,max:7,step:8,clamp:9})}}function ns(e){let t,n,r,s,o,i,l,c;const a=e[5].default,u=_(a,e,e[4],null),p=e[5].default,d=_(p,e,e[4],null);return{c(){t=Q("div"),n=Q("div"),u&&u.c(),s=ne(),o=Q("div"),d&&d.c(),ie(n,"class","original svelte-1ism9xx"),Ae((()=>e[6].call(n))),ie(o,"class","shrinked svelte-1ism9xx"),ie(o,"style",i=`\n      --scale-x: ${e[3]};\n      --scroll-time: ${(e[2]-e[1])/20}s;\n    `),he(o,"scrolling",e[2]*e[0]>e[1]),ie(t,"class","root svelte-1ism9xx"),Ae((()=>e[7].call(t)))},m(i,a){K(i,t,a),Y(t,n),u&&u.m(n,null),r=$e(n,e[6].bind(n)),Y(t,s),Y(t,o),d&&d.m(o,null),l=$e(t,e[7].bind(t)),c=!0},p(e,[t]){u&&u.p&&16&t&&z(u,a,e,e[4],t,null,null),d&&d.p&&16&t&&z(d,p,e,e[4],t,null,null),(!c||14&t&&i!==(i=`\n      --scale-x: ${e[3]};\n      --scroll-time: ${(e[2]-e[1])/20}s;\n    `))&&ie(o,"style",i),7&t&&he(o,"scrolling",e[2]*e[0]>e[1])},i(e){c||(_e(u,e),_e(d,e),c=!0)},o(e){Ge(u,e),Ge(d,e),c=!1},d(e){e&&J(t),u&&u.d(e),r(),d&&d.d(e),l()}}}function rs(e,t,n){let{$$slots:r={},$$scope:s}=t,{shrinklimit:o=.8}=t,i=1,l=1;let c;return e.$$set=e=>{"shrinklimit"in e&&n(0,o=e.shrinklimit),"$$scope"in e&&n(4,s=e.$$scope)},e.$$.update=()=>{var t,r,s;7&e.$$.dirty&&n(3,(t=i/l,r=o,s=1,c=Math.min(Math.max(t,r),s)))},[o,i,l,c,s,r,function(){l=this.clientWidth,n(2,l)},function(){i=this.clientWidth,n(1,i)}]}class ss extends qe{constructor(e){super(),He(this,e,rs,ns,S,{shrinklimit:0})}}function os(e,t,n){const r=e.slice();return r[7]=t[n],r[8]=t,r[9]=n,r}function is(e){let t,n=e[0].name+"";return{c(){t=te(n)},m(e,n){K(e,t,n)},p(e,r){1&r&&n!==(n=e[0].name+"")&&ce(t,n)},d(e){e&&J(t)}}}function ls(e){let t,n,r=e[0].description+"";return{c(){t=Q("h3"),n=te(r),ie(t,"class","svelte-1mqkgdc")},m(e,r){K(e,t,r),Y(t,n)},p(e,t){1&t&&r!==(r=e[0].description+"")&&ce(n,r)},d(e){e&&J(t)}}}function cs(e){let t,n,r,s,o;n=new ss({props:{$$slots:{default:[is]},$$scope:{ctx:e}}});let i=e[0].description&&ls(e);return{c(){t=Q("h2"),We(n.$$.fragment),r=ne(),i&&i.c(),s=re(),ie(t,"class","svelte-1mqkgdc")},m(e,l){K(e,t,l),Ue(n,t,null),K(e,r,l),i&&i.m(e,l),K(e,s,l),o=!0},p(e,t){const r={};1025&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r),e[0].description?i?i.p(e,t):(i=ls(e),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},i(e){o||(_e(n.$$.fragment,e),o=!0)},o(e){Ge(n.$$.fragment,e),o=!1},d(e){e&&J(t),Ve(n),e&&J(r),i&&i.d(e),e&&J(s)}}}function as(e){let t,n,r,s,o,i,l,c,a;function u(t){e[4].call(null,t)}let p={size:10};return void 0!==e[0].enabled&&(p.checked=e[0].enabled),t=new Zr({props:p}),we.push((()=>Fe(t,"checked",u))),t.$on("contextmenu",e[2]),o=new Br({props:{$$slots:{default:[cs]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment),r=ne(),s=Q("div"),We(o.$$.fragment)},m(e,n){Ue(t,e,n),K(e,r,n),K(e,s,n),Ue(o,s,null),l=!0,c||(a=B(i=Dr.call(null,s)),c=!0)},p(e,r){const s={};!n&&1&r&&(n=!0,s.checked=e[0].enabled,Ne((()=>n=!1))),t.$set(s);const i={};1025&r&&(i.$$scope={dirty:r,ctx:e}),o.$set(i)},i(e){l||(_e(t.$$.fragment,e),_e(o.$$.fragment,e),l=!0)},o(e){Ge(t.$$.fragment,e),Ge(o.$$.fragment,e),l=!1},d(e){Ve(t,e),e&&J(r),e&&J(s),Ve(o),c=!1,a()}}}function us(e){let t,n,r;function s(t){e[5].call(null,t,e[7])}let o={type:e[7].type,min:e[7].min,max:e[7].max,disabled:!e[0].enabled};return void 0!==e[7].value&&(o.value=e[7].value),t=new ts({props:o}),we.push((()=>Fe(t,"value",s))),{c(){We(t.$$.fragment)},m(e,n){Ue(t,e,n),r=!0},p(r,s){e=r;const o={};1&s&&(o.type=e[7].type),1&s&&(o.min=e[7].min),1&s&&(o.max=e[7].max),1&s&&(o.disabled=!e[0].enabled),!n&&1&s&&(n=!0,o.value=e[7].value,Ne((()=>n=!1))),t.$set(o)},i(e){r||(_e(t.$$.fragment,e),r=!0)},o(e){Ge(t.$$.fragment,e),r=!1},d(e){Ve(t,e)}}}function ps(e){let t,n,r=e[0].mod.parameters,s=[];for(let t=0;t<r.length;t+=1)s[t]=us(os(e,r,t));const o=e=>Ge(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=re()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);K(e,t,r),n=!0},p(e,n){if(1&n){let i;for(r=e[0].mod.parameters,i=0;i<r.length;i+=1){const o=os(e,r,i);s[i]?(s[i].p(o,n),_e(s[i],1)):(s[i]=us(o),s[i].c(),_e(s[i],1),s[i].m(t.parentNode,t))}for(De(),i=r.length;i<s.length;i+=1)o(i);je()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)_e(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)Ge(s[e]);n=!1},d(e){Z(s,e),e&&J(t)}}}function ds(e){let t,n,r,s,o,i,l,c,a;return n=new Yr({props:{hpad:16,vpad:8,spacing:8,align:"center",$$slots:{default:[as]},$$scope:{ctx:e}}}),i=new Br({props:{spacing:8,hpad:8,$$slots:{default:[ps]},$$scope:{ctx:e}}}),{c(){t=Q("div"),We(n.$$.fragment),s=ne(),o=Q("div"),We(i.$$.fragment),ie(o,"class","knobs svelte-1mqkgdc")},m(e,u){K(e,t,u),Ue(n,t,null),K(e,s,u),K(e,o,u),Ue(i,o,null),l=!0,c||(a=B(r=Dr.call(null,t)),c=!0)},p(e,t){const r={};1025&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const s={};1025&t&&(s.$$scope={dirty:t,ctx:e}),i.$set(s)},i(e){l||(_e(n.$$.fragment,e),_e(i.$$.fragment,e),l=!0)},o(e){Ge(n.$$.fragment,e),Ge(i.$$.fragment,e),l=!1},d(e){e&&J(t),Ve(n),e&&J(s),e&&J(o),Ve(i),c=!1,a()}}}function fs(e){let t,n,r,s,o,i;return n=new Yr({props:{align:"center",$$slots:{default:[ds]},$$scope:{ctx:e}}}),{c(){t=Q("article"),We(n.$$.fragment),ie(t,"class","track-head svelte-1mqkgdc"),ie(t,"style",r=`--track-height: ${e[0].height}px`),he(t,"selected",e[1]),he(t,"disabled",!e[0].enabled)},m(r,l){K(r,t,l),Ue(n,t,null),s=!0,o||(i=se(t,"pointerdown",e[3]),o=!0)},p(e,[o]){const i={};1025&o&&(i.$$scope={dirty:o,ctx:e}),n.$set(i),(!s||1&o&&r!==(r=`--track-height: ${e[0].height}px`))&&ie(t,"style",r),2&o&&he(t,"selected",e[1]),1&o&&he(t,"disabled",!e[0].enabled)},i(e){s||(_e(n.$$.fragment,e),s=!0)},o(e){Ge(n.$$.fragment,e),s=!1},d(e){e&&J(t),Ve(n),o=!1,i()}}}function $s(e,t,n){let{selected:r=!1}=t,{track:s}=t;const o=ve();return e.$$set=e=>{"selected"in e&&n(1,r=e.selected),"track"in e&&n(0,s=e.track)},[s,r,function(e){e.preventDefault(),o("solo",s)},function(t){ye(e,t)},function(e){s.enabled=e,n(0,s)},function(e,t){t.value=e,n(0,s)}]}class hs extends qe{constructor(e){super(),He(this,e,$s,fs,S,{selected:1,track:0})}}function ms(e){const t=e-1;return t*t*t+1}function gs(e){return"[object Date]"===Object.prototype.toString.call(e)}function vs(e,t,n,r){if("number"==typeof n||gs(n)){const s=r-n,o=(n-t)/(e.dt||1/60),i=(o+(e.opts.stiffness*s-e.opts.damping*o)*e.inv_mass)*e.dt;return Math.abs(i)<e.opts.precision&&Math.abs(s)<e.opts.precision?r:(e.settled=!1,gs(n)?new Date(n.getTime()+i):n+i)}if(Array.isArray(n))return n.map(((s,o)=>vs(e,t[o],n[o],r[o])));if("object"==typeof n){const s={};for(const o in n)s[o]=vs(e,t[o],n[o],r[o]);return s}throw new Error(`Cannot spring ${typeof n} values`)}function ys(e,t={}){const n=Ke(e),{stiffness:r=.15,damping:s=.8,precision:o=.01}=t;let i,l,c,a=e,u=e,p=1,d=0,f=!1;function $(t,r={}){u=t;const s=c={};if(null==e||r.hard||h.stiffness>=1&&h.damping>=1)return f=!0,i=W(),a=t,n.set(e=u),Promise.resolve();if(r.soft){const e=!0===r.soft?.5:+r.soft;d=1/(60*e),p=0}return l||(i=W(),f=!1,l=q((t=>{if(f)return f=!1,l=null,!1;p=Math.min(p+d,1);const r={inv_mass:p,opts:h,settled:!0,dt:60*(t-i)/1e3},s=vs(r,a,e,u);return i=t,a=e,n.set(e=s),r.settled&&(l=null),!r.settled}))),new Promise((e=>{l.promise.then((()=>{s===c&&e()}))}))}const h={set:$,update:(t,n)=>$(t(u,e),n),subscribe:n.subscribe,stiffness:r,damping:s,precision:o};return h}function xs(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map(((t,n)=>xs(e[n],t)));return e=>n.map((t=>t(e)))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(gs(e)&&gs(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),r={};return n.forEach((n=>{r[n]=xs(e[n],t[n])})),e=>{const t={};return n.forEach((n=>{t[n]=r[n](e)})),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}const ws=new Set;function Es(e,t){const n=n=>{t.call(e,new CustomEvent("command",{detail:n}))};return ws.add(n),{destroy(){ws.delete(n)}}}function bs(e){let t,n;return{c(){t=ee("path"),ie(t,"d",n=`\n            M ${e[4]*(e[0][0]/e[3].duration)},0\n            h 30\n            m -30,0\n            l 10,10\n            m -10,-10\n            l 10,-10\n\n            M ${e[4]*(e[0][1]/e[3].duration)},0\n            h -30\n            m 30,0\n            l -10,10\n            m 10,-10\n            l -10,-10\n          `),ie(t,"fill","none"),ie(t,"stroke","var(--color-background-0)"),ie(t,"stroke-width","2")},m(e,n){K(e,t,n)},p(e,r){25&r&&n!==(n=`\n            M ${e[4]*(e[0][0]/e[3].duration)},0\n            h 30\n            m -30,0\n            l 10,10\n            m -10,-10\n            l 10,-10\n\n            M ${e[4]*(e[0][1]/e[3].duration)},0\n            h -30\n            m 30,0\n            l -10,10\n            m 10,-10\n            l -10,-10\n          `)&&ie(t,"d",n)},d(e){e&&J(t)}}}function ks(e){let t,n,r,s,o,i=e[3]&&e[2]&&bs(e);return{c(){t=Q("div"),n=ee("svg"),r=ee("path"),i&&i.c(),ie(r,"transform","translate(0 1) scale(1 0.9)"),ie(r,"fill","none"),ie(r,"vector-effect","non-scaling-stroke"),ie(r,"stroke","currentColor"),ie(r,"stroke-width",e[1]),ie(r,"d",e[6]),ie(n,"preserveAspectRatio","none"),ie(n,"viewBox",s=`0 0 ${e[5]} 2`),ie(n,"class","svelte-nahov4"),ie(t,"class","audio-waveform svelte-nahov4"),Ae((()=>e[9].call(t)))},m(s,l){K(s,t,l),Y(t,n),Y(n,r),i&&i.m(n,null),o=$e(t,e[9].bind(t))},p(e,[t]){2&t&&ie(r,"stroke-width",e[1]),64&t&&ie(r,"d",e[6]),e[3]&&e[2]?i?i.p(e,t):(i=bs(e),i.c(),i.m(n,null)):i&&(i.d(1),i=null),32&t&&s!==(s=`0 0 ${e[5]} 2`)&&ie(n,"viewBox",s)},i:T,o:T,d(e){e&&J(t),i&&i.d(),o()}}}function Rs(e,t,n){let r;j(e,Ze,(e=>n(12,r=e)));let s,o,i,{blob:l}=t,{visibleRange:c}=t,{detail:a=1}=t,{lineWidth:u=1}=t,{debugRange:p=!1}=t,d=0,f=[0,0],$="";function h(e,t){i&&clearTimeout(i),i=setTimeout((()=>{i=null,requestAnimationFrame((()=>{!function(e,t){const r=t[1]-t[0];if(r<=0)return"";const s=o*(r/e.duration),i=r*e.sampleRate*(a/s),l=t.map((t=>Math.round(t*e.sampleRate))),c=o*t[0]/e.duration;let u="";const p=new Array(e.numberOfChannels);for(let t=0;t<e.numberOfChannels;t++)p[t]=e.getChannelData(t);if(i>1){let e=-1,t=1;for(let n=0;n*a<s;n++){const r=l[0]+n*i;let s=1,o=-1;for(const e of p)for(let t=0|r;t<r+i;t++){const n=(t%e.length+e.length)%e.length;s=Math.min(s,e[n]),o=Math.max(o,e[n])}s=Math.min(s,t),o=Math.max(o,e),e=s,t=o,u+=`M${c+a*n},${s}V${o}`}}else{const e=s/(l[1]-l[0]);for(const t of p)for(let n=l[0];n<l[1];n++){const r=(n%t.length+t.length)%t.length;n===l[0]?u+=`M${c},${t[r]}`:u+="V"+t[r],u+="h"+e}}n(6,$=u),n(10,f[0]=t[0],f),n(10,f[1]=t[1],f),n(5,d=o)}(e,t)}))}),100)}return e.$$set=e=>{"blob"in e&&n(7,l=e.blob),"visibleRange"in e&&n(0,c=e.visibleRange),"detail"in e&&n(8,a=e.detail),"lineWidth"in e&&n(1,u=e.lineWidth),"debugRange"in e&&n(2,p=e.debugRange)},e.$$.update=()=>{4232&e.$$.dirty&&r.decodeBlob(l).then((e=>{s!==e&&n(3,s=e)})),1081&e.$$.dirty&&(c[0]===f[0]&&c[1]===f[1]&&o===d||h(s,c))},[c,u,p,s,o,d,$,l,a,function(){o=this.clientWidth,n(4,o)}]}window.addEventListener("keydown",(e=>{const t=D(Dn);e:for(const{key:n,command:r}of t){let t,s=n;for(;null!==(t=s.match(/^(ctrl|alt|shift)\+/));){if(!e[{ctrl:"ctrlKey",alt:"altKey",shift:"shiftKey"}[t[1]]])continue e;s=s.substr(t[0].length)}s===e.key.toLowerCase()&&(e.preventDefault(),ws.forEach((e=>e(r))))}}));class Is extends qe{constructor(e){super(),He(this,e,Rs,ks,S,{blob:7,visibleRange:0,detail:8,lineWidth:1,debugRange:2})}}function Ts(e){let t,n;return t=new Is({props:{blob:e[0].blob,visibleRange:e[5]}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.blob=e[0].blob),32&n&&(r.visibleRange=e[5]),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function As(e){let t,n,r,s,o,i,l,c,a,u,p,d,f,$,h,m,v,y,x,w=e[0].name+"",E=e[0]instanceof g&&Ts(e);return{c(){t=Q("div"),n=Q("div"),s=ne(),o=Q("div"),i=Q("header"),l=Q("h3"),c=te(w),a=ne(),u=Q("div"),E&&E.c(),f=ne(),$=Q("div"),ie(n,"class","resize-handle svelte-wm06p3"),ie(l,"class","svelte-wm06p3"),ie(i,"class","svelte-wm06p3"),ie(u,"class","data svelte-wm06p3"),ie(u,"style",p=`\n        transform: translateX(${-e[0].extentPast*e[2]}px);\n        width: ${e[0].length*e[2]}px;\n      `),ie(o,"class","content svelte-wm06p3"),ie(o,"style",d=`width: ${Math.round(Math.max(e[0].totalExtent*e[2],1))}px`),ie($,"class","resize-handle svelte-wm06p3"),ie(t,"class","clip svelte-wm06p3"),ie(t,"style",m=`\n    --clip-color: ${e[3]};\n    transform: translateX(${Math.round((e[0].start+e[0].extentPast)*e[2])}px);\n  `),he(t,"selected",e[1])},m(p,d){K(p,t,d),Y(t,n),Y(t,s),Y(t,o),Y(o,i),Y(i,l),Y(l,c),Y(o,a),Y(o,u),E&&E.m(u,null),Y(t,f),Y(t,$),v=!0,y||(x=[B(r=e[6].call(null,n,e[4].Start)),B(h=e[6].call(null,$,e[4].End)),se(t,"pointerdown",e[9])],y=!0)},p(e,[n]){r&&P(r.update)&&16&n&&r.update.call(null,e[4].Start),(!v||1&n)&&w!==(w=e[0].name+"")&&ce(c,w),e[0]instanceof g?E?(E.p(e,n),1&n&&_e(E,1)):(E=Ts(e),E.c(),_e(E,1),E.m(u,null)):E&&(De(),Ge(E,1,1,(()=>{E=null})),je()),(!v||5&n&&p!==(p=`\n        transform: translateX(${-e[0].extentPast*e[2]}px);\n        width: ${e[0].length*e[2]}px;\n      `))&&ie(u,"style",p),(!v||5&n&&d!==(d=`width: ${Math.round(Math.max(e[0].totalExtent*e[2],1))}px`))&&ie(o,"style",d),h&&P(h.update)&&16&n&&h.update.call(null,e[4].End),(!v||13&n&&m!==(m=`\n    --clip-color: ${e[3]};\n    transform: translateX(${Math.round((e[0].start+e[0].extentPast)*e[2])}px);\n  `))&&ie(t,"style",m),2&n&&he(t,"selected",e[1])},i(e){v||(_e(E),v=!0)},o(e){Ge(E),v=!1},d(e){e&&J(t),E&&E.d(),y=!1,L(x)}}}function Ns(e,t,n){let r;j(e,Je,(e=>n(10,r=e)));let{clip:s}=t,{selected:o=!1}=t,{viewRegion:i}=t,{snap:l}=t,{secWidth:c}=t,{color:a="var(--color-red)"}=t;var u;let p;return function(e){e.Start="start",e.End="end"}(u||(u={})),e.$$set=e=>{"clip"in e&&n(0,s=e.clip),"selected"in e&&n(1,o=e.selected),"viewRegion"in e&&n(7,i=e.viewRegion),"snap"in e&&n(8,l=e.snap),"secWidth"in e&&n(2,c=e.secWidth),"color"in e&&n(3,a=e.color)},e.$$.update=()=>{129&e.$$.dirty&&n(5,p=[Math.max(i[0]-s.start-s.extentPast,0)+s.extentPast,s.extent+Math.min(i[1]-s.start-s.extent,0)])},[s,o,c,a,u,p,function(e,t){function o(e){if(0!==e.button)return;e.stopPropagation(),e.preventDefault();const o=e.clientX,i=t===u.Start?s.extentPast:s.extent,a=(s.extent,e=>{const a=(e.clientX-o)/c;let p=i+a;e.altKey||(p=Math.round(p/l)*l),t===u.Start?n(0,s.extentPast=Math.max(Math.min(p,s.extent-r.quantum),-s.start),s):n(0,s.extent=Math.max(p,s.extentPast+r.quantum),s)}),p=e=>{this.removeEventListener("pointermove",a),this.removeEventListener("pointerup",p),this.releasePointerCapture(e.pointerId)};this.addEventListener("pointermove",a),this.addEventListener("pointerup",p),this.setPointerCapture(e.pointerId)}return e.addEventListener("pointerdown",o),{update(e){t=e},destroy(){e.removeEventListener("pointerdown",o)}}},i,l,function(t){ye(e,t)}]}class Os extends qe{constructor(e){super(),He(this,e,Ns,As,S,{clip:0,selected:1,viewRegion:7,snap:8,secWidth:2,color:3})}}function Ms(e,t,n){const r=e.slice();return r[28]=t[n],r[29]=t,r[30]=n,r}function Ls(e,t){let n,r,s,o;function i(e){t[17].call(null,e,t[28],t[29],t[30])}let l={selected:t[4].has(t[28]),secWidth:t[3],snap:t[2],viewRegion:t[1]};return void 0!==t[28]&&(l.clip=t[28]),r=new Os({props:l}),we.push((()=>Fe(r,"clip",i))),r.$on("pointerdown",(function(...e){return t[18](t[28],...e)})),{key:e,first:null,c(){n=re(),We(r.$$.fragment),this.first=n},m(e,t){K(e,n,t),Ue(r,e,t),o=!0},p(e,n){t=e;const o={};17&n&&(o.selected=t[4].has(t[28])),8&n&&(o.secWidth=t[3]),4&n&&(o.snap=t[2]),2&n&&(o.viewRegion=t[1]),!s&&1&n&&(s=!0,o.clip=t[28],Ne((()=>s=!1))),r.$set(o)},i(e){o||(_e(r.$$.fragment,e),o=!0)},o(e){Ge(r.$$.fragment,e),o=!1},d(e){e&&J(n),Ve(r,e)}}}function Ps(e){let t,n,r;function s(t){e[19].call(null,t)}let o={secWidth:e[3],snap:e[2],viewRegion:e[1]};return void 0!==e[8]&&(o.clip=e[8]),t=new Os({props:o}),we.push((()=>Fe(t,"clip",s))),t.$on("cliptake",e[20]),{c(){We(t.$$.fragment)},m(e,n){Ue(t,e,n),r=!0},p(e,r){const s={};8&r&&(s.secWidth=e[3]),4&r&&(s.snap=e[2]),2&r&&(s.viewRegion=e[1]),!n&&256&r&&(n=!0,s.clip=e[8],Ne((()=>n=!1))),t.$set(s)},i(e){r||(_e(t.$$.fragment,e),r=!0)},o(e){Ge(t.$$.fragment,e),r=!1},d(e){Ve(t,e)}}}function Ss(e){let t,n,r,s,o,i,l,c,a,u,p,d=[],f=new Map,$=e[0].clips;const h=e=>e[28];for(let t=0;t<$.length;t+=1){let n=Ms(e,$,t),r=h(n);f.set(r,d[t]=Ls(r,n))}let m=e[8]&&Ps(e);return{c(){t=Q("div"),n=Q("canvas"),s=ne(),o=Q("div");for(let e=0;e<d.length;e+=1)d[e].c();i=ne(),l=Q("div"),m&&m.c(),ie(n,"class","grid svelte-1v45z5n"),Ae((()=>e[16].call(n))),ie(o,"class","clips svelte-1v45z5n"),ie(l,"class","ghost-clip svelte-1v45z5n"),ie(t,"class","track svelte-1v45z5n"),ie(t,"style",c=`\n    height: ${e[0].height}px;\n    --xscroll: ${e[1][0]*e[3]}px;\n    --snap-width: ${e[2]*e[3]}px;\n    --bar-width: ${e[9].barsToTime(1)*e[3]}px;\n    --beat-width: ${e[9].beatsToTime(1)*e[3]}px;\n  `),he(t,"disabled",!e[0].enabled)},m(c,f){K(c,t,f),Y(t,n),e[15](n),r=$e(n,e[16].bind(n)),Y(t,s),Y(t,o);for(let e=0;e<d.length;e+=1)d[e].m(o,null);Y(t,i),Y(t,l),m&&m.m(l,null),a=!0,u||(p=[se(t,"pointerenter",e[14]),se(t,"dragover",e[11]),se(t,"dragleave",e[12]),se(t,"drop",e[13])],u=!0)},p(e,[n]){if(1055&n){const t=e[0].clips;De(),d=Be(d,n,h,1,e,t,f,o,Xe,Ls,null,Ms),je()}e[8]?m?(m.p(e,n),256&n&&_e(m,1)):(m=Ps(e),m.c(),_e(m,1),m.m(l,null)):m&&(De(),Ge(m,1,1,(()=>{m=null})),je()),(!a||527&n&&c!==(c=`\n    height: ${e[0].height}px;\n    --xscroll: ${e[1][0]*e[3]}px;\n    --snap-width: ${e[2]*e[3]}px;\n    --bar-width: ${e[9].barsToTime(1)*e[3]}px;\n    --beat-width: ${e[9].beatsToTime(1)*e[3]}px;\n  `))&&ie(t,"style",c),1&n&&he(t,"disabled",!e[0].enabled)},i(e){if(!a){for(let e=0;e<$.length;e+=1)_e(d[e]);_e(m),a=!0}},o(e){for(let e=0;e<d.length;e+=1)Ge(d[e]);Ge(m),a=!1},d(n){n&&J(t),e[15](null),r();for(let e=0;e<d.length;e+=1)d[e].d();m&&m.d(),u=!1,L(p)}}}const Cs=/^audio\/.+/;function Ds(e,t,n,r){const s=r%n;e.beginPath();for(let r=0;r*n-s<t;r++)e.moveTo(r*n-s,0),e.lineTo(r*n-s,1)}function js(e,t,n){let r,s;j(e,Ze,(e=>n(23,r=e))),j(e,Je,(e=>n(9,s=e)));var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};let{track:i}=t,{viewRegion:l}=t,{snap:c}=t,{secWidth:a}=t,{selectedClips:u}=t;const p=ve();let d,f,$,m,v,y=null;function x(e,t,s){return o(this,void 0,void 0,(function*(){const o=yield r.decodeBlob(s),l=new g(t,s,0,o.duration);l.start=e,n(0,i.clips=[...i.clips,l],i)}))}function w(e){const t=e.currentTarget;let n=l[0]+e.clientX/a;if(t instanceof HTMLElement){n-=t.getBoundingClientRect().x/a}return e.altKey||(n=Math.round(n/c)*c),n}return e.$$set=e=>{"track"in e&&n(0,i=e.track),"viewRegion"in e&&n(1,l=e.viewRegion),"snap"in e&&n(2,c=e.snap),"secWidth"in e&&n(3,a=e.secWidth),"selectedClips"in e&&n(4,u=e.selectedClips)},e.$$.update=()=>{714&e.$$.dirty&&(s.tempo,s.signature,null!=m||cancelAnimationFrame(m),m=requestAnimationFrame((()=>{if(!d)return;v=null!=v?v:d.getContext("2d"),n(5,d.width=f*window.devicePixelRatio,d),n(5,d.height=$*window.devicePixelRatio,d);const e=d.height,t=getComputedStyle(d),r=t.getPropertyValue("--color-background-0"),o=t.getPropertyValue("--color-background-1");m=null,v.save(),v.scale(1,e),v.strokeStyle=r,v.fillStyle=o,function(e,t,n,r){const s=r%(2*n);e.beginPath();for(let r=1;r*n-s<t;r+=2)e.rect(r*n-s,0,n,1)}(v,f,s.barsToTime(4)*a,l[0]*a),v.fill(),Ds(v,f,c*a,l[0]*a),v.globalAlpha=.5,v.stroke(),Ds(v,f,s.barsToTime(1)*a,l[0]*a),v.globalAlpha=1,v.stroke(),v.restore()})))},[i,l,c,a,u,d,f,$,y,s,p,function(e){if(e.dataTransfer.types.includes("Files")){const t=w(e);y||(n(8,y=new h("Audio clip")),n(8,y.length=n(8,y.extent=s.barsToTime(1),y),y)),n(8,y.start=t,y),e.preventDefault(),e.dataTransfer.dropEffect="copy"}},function(e){n(8,y=null)},function(e){e.preventDefault(),n(8,y=null);const t=e.dataTransfer.files,r=w(e);for(const e of t)e.type.match(Cs)&&x(r,e.name,e)},function(t){ye(e,t)},function(e){we[e?"unshift":"push"]((()=>{d=e,n(5,d)}))},function(){f=this.clientWidth,$=this.clientHeight,n(6,f),n(7,$)},function(e,t,r,s){r[s]=e,n(0,i)},(e,t)=>p("pointerdownclip",{clip:e,e:t}),function(e){y=e,n(8,y)},function(t){ye(e,t)}]}class _s extends qe{constructor(e){super(),He(this,e,js,Ss,S,{track:0,viewRegion:1,snap:2,secWidth:3,selectedClips:4})}}function Gs(e,t,n){const r=e.slice();return r[26]=t[n],r[27]=t,r[28]=n,r}function zs(e){let t,n,r;function s(t){e[17].call(null,t,e[26],e[27],e[28])}let o={viewRegion:e[7],secWidth:e[3],snap:e[4],selectedClips:e[0]};return void 0!==e[26]&&(o.track=e[26]),t=new _s({props:o}),we.push((()=>Fe(t,"track",s))),t.$on("pointerenter",(function(...t){return e[18](e[26],e[27],e[28],...t)})),t.$on("pointerdownclip",(function(...t){return e[19](e[26],...t)})),{c(){We(t.$$.fragment)},m(e,n){Ue(t,e,n),r=!0},p(r,s){e=r;const o={};128&s&&(o.viewRegion=e[7]),8&s&&(o.secWidth=e[3]),16&s&&(o.snap=e[4]),1&s&&(o.selectedClips=e[0]),!n&&256&s&&(n=!0,o.track=e[26],Ne((()=>n=!1))),t.$set(o)},i(e){r||(_e(t.$$.fragment,e),r=!0)},o(e){Ge(t.$$.fragment,e),r=!1},d(e){Ve(t,e)}}}function Xs(e){let t,n,r=e[8].tracks,s=[];for(let t=0;t<r.length;t+=1)s[t]=zs(Gs(e,r,t));const o=e=>Ge(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=re()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);K(e,t,r),n=!0},p(e,n){if(441&n){let i;for(r=e[8].tracks,i=0;i<r.length;i+=1){const o=Gs(e,r,i);s[i]?(s[i].p(o,n),_e(s[i],1)):(s[i]=zs(o),s[i].c(),_e(s[i],1),s[i].m(t.parentNode,t))}for(De(),i=r.length;i<s.length;i+=1)o(i);je()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)_e(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)Ge(s[e]);n=!1},d(e){Z(s,e),e&&J(t)}}}function Bs(e){let t,n,r,s,o,i,l,c,a,u,p;return n=new Br({props:{spacing:4,$$slots:{default:[Xs]},$$scope:{ctx:e}}}),{c(){t=Q("div"),We(n.$$.fragment),r=ne(),s=Q("div"),ie(s,"class","cursor svelte-zp0sqv"),ie(s,"style",o=`--x: ${e[1]}px`),ie(t,"class","timeline svelte-zp0sqv"),Ae((()=>e[20].call(t)))},m(o,d){K(o,t,d),Ue(n,t,null),Y(t,r),Y(t,s),l=$e(t,e[20].bind(t)),a=!0,u||(p=[se(window,"keydown",Fs),se(window,"keyup",Ws),se(window,"pointerdown",e[15],!0),se(window,"pointerup",e[16]),B(i=e[10].call(null,t)),se(t,"wheel",e[11]),B(c=Es.call(null,t,e[21])),se(t,"pointerdown",e[22],!0),se(t,"pointermove",e[23])],u=!0)},p(e,[t]){const r={};536871353&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r),(!a||2&t&&o!==(o=`--x: ${e[1]}px`))&&ie(s,"style",o),c&&P(c.update)&&257&t&&c.update.call(null,e[21])},i(e){a||(_e(n.$$.fragment,e),a=!0)},o(e){Ge(n.$$.fragment,e),a=!1},d(e){e&&J(t),Ve(n),l(),u=!1,L(p)}}}function Fs(e){"Alt"===e.key&&e.preventDefault()}function Ws(e){"Alt"===e.key&&e.preventDefault()}function Us(e,t,n){let r,s,o;j(e,Je,(e=>n(8,s=e))),j(e,Ze,(e=>n(25,o=e)));let i,l,c,a=new Set,u=0,p=300,d=[0,20],f=null,$=function(e,t={}){const n=Ke(e);let r,s=e;function o(o,i){if(null==e)return n.set(e=o),Promise.resolve();s=o;let l=r,c=!1,{delay:a=0,duration:u=400,easing:p=A,interpolate:d=xs}=N(N({},t),i);if(0===u)return l&&(l.abort(),l=null),n.set(e=s),Promise.resolve();const f=W()+a;let $;return r=q((t=>{if(t<f)return!0;c||($=d(e,o),"function"==typeof u&&(u=u(e,o)),c=!0),l&&(l.abort(),l=null);const r=t-f;return r>u?(n.set(e=o),!1):(n.set(e=$(p(r/u))),!0)})),r.promise}return{set:o,update:(t,n)=>o(t(s,e),n),subscribe:n.subscribe}}(d,{duration:100,easing:ms});j(e,$,(e=>n(7,r=e)));return e.$$.update=()=>{if(16777216&e.$$.dirty&&$.set([d[0],d[1]]),132&e.$$.dirty&&n(3,i=p/(r[1]-r[0])),280&e.$$.dirty){n(4,l=s.barsToTime(1));for(let e=0;e<8&&l/2*i>=15;e++)n(4,l/=2);l/2*i>=20&&n(4,l=s.quantum)}if(33554568&e.$$.dirty)if(o.playing){const e=()=>{o.playing&&(n(1,u=(o.currentTime-r[0])*i),requestAnimationFrame(e))};e()}else n(1,u=(o.startCursor-r[0])*i)},[a,u,p,i,l,f,c,r,s,$,function(e){n(2,p=e.getBoundingClientRect().width)},function(e){if(e.ctrlKey){e.preventDefault();const t=this.getBoundingClientRect(),s=1+.1*Math.sign(e.deltaY),o=r[0]+(e.clientX-t.left)/i;for(let e=0;e<2;e++){const t=d[e]-o;n(24,d[e]=Math.max(0,o+t*s),d)}}},function(e){const t=d[1]-d[0];n(24,d[0]=Math.max(0,d[0]+e/i),d),n(24,d[1]=d[0]+t,d)},function(e){for(const t of e.clips)a.add(t);n(0,a)},function(e){if(e)for(const t of e.clips)a.delete(t);else a.clear();n(0,a)},e=>{0!==e.button||e.shiftKey||e.ctrlKey||(a.clear(),n(0,a))},e=>{0===e.button&&n(5,f=null)},function(e,t,n,r){n[r]=e,Je.set(s)},(e,t,r)=>{f&&e.mod.canPlay(f.clip)&&(n(5,f.track.clips=f.track.clips.filter((e=>e!==f.clip)),f),X(Je,t[r].clips=[...e.clips,f.clip],s),n(5,f.track=e,f))},(e,t)=>{0===t.detail.e.button&&(n(5,f={clip:t.detail.clip,start:t.detail.clip.start,track:e}),n(0,a=a.add(t.detail.clip)))},function(){p=this.clientWidth,n(2,p)},e=>{switch(e.detail){case"timeline.clip.delete":for(const e of s.tracks)e.clips=e.clips.filter((e=>!a.has(e)));a.clear(),n(0,a);break;case"timeline.clip.duplicate":for(const e of s.tracks){const t=e.clips.filter((e=>a.has(e)));for(const n of t)e.clips.push(n.duplicate()),n.start+=n.totalExtent}n(0,a)}},e=>{0===e.button&&n(6,c={x:e.clientX,y:e.clientY})},e=>{if(f){const t=e.clientX-c.x;let r=f.start+t/i;e.altKey||(r=Math.round(r/l)*l),r=Math.max(-f.clip.extentPast,r),n(5,f.clip.start=r,f),Je.set(s)}}]}class Vs extends qe{constructor(e){super(),He(this,e,Us,Bs,S,{scrollBy:12,selectAllClips:13,deselectAllClips:14})}get scrollBy(){return this.$$.ctx[12]}get selectAllClips(){return this.$$.ctx[13]}get deselectAllClips(){return this.$$.ctx[14]}}function Hs(e){let t,n,r,s,o,i,l,c,a,u;return{c(){t=ee("path"),r=ne(),s=ee("circle"),l=ne(),c=ee("circle"),ie(t,"class","link svelte-1vdfi8j"),ie(t,"fill","none"),ie(t,"stroke","currentColor"),ie(t,"stroke-width",e[1]),ie(t,"d",n=`\n    M ${e[0].x},${e[0].y}\n    c ${e[2].x*e[4]},0\n      ${e[2].x*e[3]},${e[2].y}\n      ${e[2].x},${e[2].y}\n  `),ie(s,"cx",o=e[0].x),ie(s,"cy",i=e[0].y),ie(s,"r","4"),ie(s,"fill","currentColor"),ie(c,"cx",a=e[0].x+e[2].x),ie(c,"cy",u=e[0].y+e[2].y),ie(c,"r","4"),ie(c,"fill","currentColor")},m(e,n){K(e,t,n),K(e,r,n),K(e,s,n),K(e,l,n),K(e,c,n)},p(e,[r]){2&r&&ie(t,"stroke-width",e[1]),29&r&&n!==(n=`\n    M ${e[0].x},${e[0].y}\n    c ${e[2].x*e[4]},0\n      ${e[2].x*e[3]},${e[2].y}\n      ${e[2].x},${e[2].y}\n  `)&&ie(t,"d",n),1&r&&o!==(o=e[0].x)&&ie(s,"cx",o),1&r&&i!==(i=e[0].y)&&ie(s,"cy",i),5&r&&a!==(a=e[0].x+e[2].x)&&ie(c,"cx",a),5&r&&u!==(u=e[0].y+e[2].y)&&ie(c,"cy",u)},i:T,o:T,d(e){e&&J(t),e&&J(r),e&&J(s),e&&J(l),e&&J(c)}}}function qs(e,t,n){let r,s,o,{source:i}=t,{target:l}=t,{linkWidth:c="2"}=t,{stiffness:a=(({x:e})=>1+1/(-1-Math.abs(e)/300))}=t;return e.$$set=e=>{"source"in e&&n(0,i=e.source),"target"in e&&n(5,l=e.target),"linkWidth"in e&&n(1,c=e.linkWidth),"stiffness"in e&&n(6,a=e.stiffness)},e.$$.update=()=>{33&e.$$.dirty&&n(2,r={x:l.x-i.x,y:l.y-i.y}),68&e.$$.dirty&&n(3,s=Math.max(0,Math.min(1,"number"==typeof a?a:a(Object.assign({},r))))),8&e.$$.dirty&&n(4,o=1-s)},[i,c,r,s,o,l,a]}class Ys extends qe{constructor(e){super(),He(this,e,qs,Hs,S,{source:0,target:5,linkWidth:1,stiffness:6})}}function Ks(e,t=!1){return t?{x:e.width/2,y:e.height/2}:{x:e.x+e.width/2,y:e.y+e.height/2}}function Js(e){let t,n,r;return n=new Ys({props:{source:{x:0,y:0},target:e[3]}}),{c(){t=ee("svg"),We(n.$$.fragment),ie(t,"class","link svelte-1lotldg")},m(e,s){K(e,t,s),Ue(n,t,null),r=!0},p(e,t){const r={};8&t&&(r.target=e[3]),n.$set(r)},i(e){r||(_e(n.$$.fragment,e),r=!0)},o(e){Ge(n.$$.fragment,e),r=!1},d(e){e&&J(t),Ve(n)}}}function Zs(e){let t,n,r,s,o,i,l,c,a,u,p=e[3]&&Js(e);return{c(){t=Q("div"),n=ee("svg"),r=ee("circle"),i=ne(),p&&p.c(),ie(r,"class","port-dot svelte-1lotldg"),ue(r,"r","var(--dot-size)"),ie(r,"cx",s=e[0]/2),ie(r,"cy",o=e[0]/2),ie(r,"fill","currentColor"),ie(n,"width",e[0]),ie(n,"height",e[0]),ie(t,"class","graph-port svelte-1lotldg"),ie(t,"style",l=`\n    color: ${e[1]};\n  `)},m(s,o){K(s,t,o),Y(t,n),Y(n,r),Y(t,i),p&&p.m(t,null),e[9](t),c=!0,a||(u=[se(t,"pointerup",e[7]),se(t,"pointerdown",e[8])],a=!0)},p(e,[i]){(!c||1&i&&s!==(s=e[0]/2))&&ie(r,"cx",s),(!c||1&i&&o!==(o=e[0]/2))&&ie(r,"cy",o),(!c||1&i)&&ie(n,"width",e[0]),(!c||1&i)&&ie(n,"height",e[0]),e[3]?p?(p.p(e,i),8&i&&_e(p,1)):(p=Js(e),p.c(),_e(p,1),p.m(t,null)):p&&(De(),Ge(p,1,1,(()=>{p=null})),je()),(!c||2&i&&l!==(l=`\n    color: ${e[1]};\n  `))&&ie(t,"style",l)},i(e){c||(_e(p),c=!0)},o(e){Ge(p),c=!1},d(n){n&&J(t),p&&p.d(),e[9](null),a=!1,L(u)}}}function Qs(e,t,n){var r,s;let{context:o}=t,{link:i}=t,{size:l=8}=t,{color:c="var(--color-foreground-2)"}=t;const a=ve();let u=null,p=null,d=null;!function(e){ge().$$.on_destroy.push(e)}((()=>{d&&d()}));return e.$$set=e=>{"context"in e&&n(5,o=e.context),"link"in e&&n(6,i=e.link),"size"in e&&n(0,l=e.size),"color"in e&&n(1,c=e.color)},e.$$.update=()=>{4160&e.$$.dirty&&(i||(n(3,p=null),d&&(d(),n(12,d=null)))),7268&e.$$.dirty&&i&&u&&(d&&(d(),n(12,d=null)),n(12,d=null===n(11,s=null===n(10,r=o.nodeMap.get(i.node))||void 0===r?void 0:r.get(i.output))||void 0===s?void 0:s.subscribe((e=>{if(e){const t=u.getBoundingClientRect(),r=Ks(t,!0);n(3,p={x:e.x-t.left-r.x,y:e.y-t.top-r.y})}}))))},[l,c,u,p,a,o,i,e=>0===e.button&&a("connect"),e=>0===e.button&&a("wiretake"),function(e){we[e?"unshift":"push"]((()=>{u=e,n(2,u)}))}]}class eo extends qe{constructor(e){super(),He(this,e,Qs,Zs,S,{context:5,link:6,size:0,color:1})}}function to(e){let t,n,r,s,o,i,l,c,a;return{c(){t=Q("div"),n=ee("svg"),r=ee("clipPath"),s=ee("circle"),o=ee("g"),i=ee("circle"),ie(s,"cx","0%"),ie(s,"cy","0%"),ie(s,"r","50%"),ie(r,"id","hole-clip"),ie(i,"clip-path","url('#hole-clip')"),ie(i,"cx","0%"),ie(i,"cy","0%"),ie(i,"r","50%"),ie(i,"stroke","currentColor"),ie(i,"stroke-width","50%"),ie(i,"fill","none"),ie(i,"class","circle svelte-1c8d4hw"),ie(o,"class","port-group svelte-1c8d4hw"),ie(n,"width",e[0]),ie(n,"height",e[0]),ie(n,"class","svelte-1c8d4hw"),ie(t,"class","output-port svelte-1c8d4hw"),ie(t,"style",l=`\n    color: ${e[1]};\n  `)},m(l,u){K(l,t,u),Y(t,n),Y(n,r),Y(r,s),Y(n,o),Y(o,i),e[7](t),c||(a=se(t,"pointerdown",e[6]),c=!0)},p(e,[r]){1&r&&ie(n,"width",e[0]),1&r&&ie(n,"height",e[0]),2&r&&l!==(l=`\n    color: ${e[1]};\n  `)&&ie(t,"style",l)},i:T,o:T,d(n){n&&J(t),e[7](null),c=!1,a()}}}function no(e,t,n){let{context:r}=t,{output:s}=t,{size:o=16}=t,{color:i="var(--color-foreground-2)"}=t;const l=ve();let c,a=void 0;return e.$$set=e=>{"context"in e&&n(4,r=e.context),"output"in e&&n(5,s=e.output),"size"in e&&n(0,o=e.size),"color"in e&&n(1,i=e.color)},e.$$.update=()=>{if(52&e.$$.dirty&&a&&(r.xscroll,n(8,c=Ks(a.getBoundingClientRect()))),304&e.$$.dirty&&s){let e=r.nodeMap.get(s.node);e||(e=new Map,r.nodeMap.set(s.node,e));let t=e.get(s.output);t||(t=Ke(null),e.set(s.output,t)),t.set(c)}},[o,i,a,l,r,s,e=>{0===e.button&&l("wireout",{portElem:e.currentTarget})},function(e){we[e?"unshift":"push"]((()=>{a=e,n(2,a)}))}]}class ro extends qe{constructor(e){super(),He(this,e,no,to,S,{context:4,output:5,size:0,color:1})}}function so(e,t,n){const r=e.slice();return r[16]=t[n],r[17]=t,r[18]=n,r}function oo(e,t,n){const r=e.slice();return r[19]=t[n],r[21]=n,r}function io(e,t,n){const r=e.slice();return r[19]=t[n],r[23]=n,r}function lo(e){let t,n,r;function s(t){e[6].call(null,t)}let o={link:e[1].inputs.get(e[23])};return void 0!==e[0]&&(o.context=e[0]),t=new eo({props:o}),we.push((()=>Fe(t,"context",s))),t.$on("wiretake",(function(...t){return e[7](e[23],...t)})),t.$on("connect",(function(...t){return e[8](e[23],...t)})),{c(){We(t.$$.fragment)},m(e,n){Ue(t,e,n),r=!0},p(r,s){e=r;const o={};2&s&&(o.link=e[1].inputs.get(e[23])),!n&&1&s&&(n=!0,o.context=e[0],Ne((()=>n=!1))),t.$set(o)},i(e){r||(_e(t.$$.fragment,e),r=!0)},o(e){Ge(t.$$.fragment,e),r=!1},d(e){Ve(t,e)}}}function co(e){let t,n,r={length:e[1].mod.inputs},s=[];for(let t=0;t<r.length;t+=1)s[t]=lo(io(e,r,t));const o=e=>Ge(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=re()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);K(e,t,r),n=!0},p(e,n){if(11&n){let i;for(r={length:e[1].mod.inputs},i=0;i<r.length;i+=1){const o=io(e,r,i);s[i]?(s[i].p(o,n),_e(s[i],1)):(s[i]=lo(o),s[i].c(),_e(s[i],1),s[i].m(t.parentNode,t))}for(De(),i=r.length;i<s.length;i+=1)o(i);je()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)_e(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)Ge(s[e]);n=!1},d(e){Z(s,e),e&&J(t)}}}function ao(e){let t,n,r;function s(t){e[9].call(null,t)}let o={output:{node:e[1],output:e[21]}};return void 0!==e[0]&&(o.context=e[0]),t=new ro({props:o}),we.push((()=>Fe(t,"context",s))),t.$on("wireout",(function(...t){return e[10](e[21],...t)})),{c(){We(t.$$.fragment)},m(e,n){Ue(t,e,n),r=!0},p(r,s){e=r;const o={};2&s&&(o.output={node:e[1],output:e[21]}),!n&&1&s&&(n=!0,o.context=e[0],Ne((()=>n=!1))),t.$set(o)},i(e){r||(_e(t.$$.fragment,e),r=!0)},o(e){Ge(t.$$.fragment,e),r=!1},d(e){Ve(t,e)}}}function uo(e){let t,n,r={length:e[1].mod.outputs},s=[];for(let t=0;t<r.length;t+=1)s[t]=ao(oo(e,r,t));const o=e=>Ge(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=re()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);K(e,t,r),n=!0},p(e,n){if(11&n){let i;for(r={length:e[1].mod.outputs},i=0;i<r.length;i+=1){const o=oo(e,r,i);s[i]?(s[i].p(o,n),_e(s[i],1)):(s[i]=ao(o),s[i].c(),_e(s[i],1),s[i].m(t.parentNode,t))}for(De(),i=r.length;i<s.length;i+=1)o(i);je()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)_e(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)Ge(s[e]);n=!1},d(e){Z(s,e),e&&J(t)}}}function po(e){let t,n,r,s,o,i,l=e[1].mod.name+"";function c(t){e[11].call(null,t)}let a={size:8};return void 0!==e[1].enabled&&(a.checked=e[1].enabled),t=new Zr({props:a}),we.push((()=>Fe(t,"checked",c))),{c(){We(t.$$.fragment),r=ne(),s=Q("h2"),o=te(l),ie(s,"class","svelte-6n1kn7")},m(e,n){Ue(t,e,n),K(e,r,n),K(e,s,n),Y(s,o),i=!0},p(e,r){const s={};!n&&2&r&&(n=!0,s.checked=e[1].enabled,Ne((()=>n=!1))),t.$set(s),(!i||2&r)&&l!==(l=e[1].mod.name+"")&&ce(o,l)},i(e){i||(_e(t.$$.fragment,e),i=!0)},o(e){Ge(t.$$.fragment,e),i=!1},d(e){Ve(t,e),e&&J(r),e&&J(s)}}}function fo(e){let t,n,r,s,o,i;return t=new Yr({props:{hpad:4,vpad:2,spacing:8,align:"center",$$slots:{default:[po]},$$scope:{ctx:e}}}),r=new Sr({}),o=new tr({props:{name:"arrow/chevron_down",color:"var(--color-foreground-2)"}}),{c(){We(t.$$.fragment),n=ne(),We(r.$$.fragment),s=ne(),We(o.$$.fragment)},m(e,l){Ue(t,e,l),K(e,n,l),Ue(r,e,l),K(e,s,l),Ue(o,e,l),i=!0},p(e,n){const r={};16777218&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){i||(_e(t.$$.fragment,e),_e(r.$$.fragment,e),_e(o.$$.fragment,e),i=!0)},o(e){Ge(t.$$.fragment,e),Ge(r.$$.fragment,e),Ge(o.$$.fragment,e),i=!1},d(e){Ve(t,e),e&&J(n),Ve(r,e),e&&J(s),Ve(o,e)}}}function $o(e){let t,n,r,s,o,i,l,c=e[16].name+"";function a(t){e[12].call(null,t,e[16])}let u={id:`${e[1].id}-${e[16].name}`,type:e[16].type,min:e[16].min,max:e[16].max,disabled:!e[1].enabled};return void 0!==e[16].value&&(u.value=e[16].value),t=new ts({props:u}),we.push((()=>Fe(t,"value",a))),{c(){We(t.$$.fragment),r=ne(),s=Q("label"),o=te(c),ie(s,"for",i=`${e[1].id}-${e[16].name}`),ie(s,"class","svelte-6n1kn7")},m(e,n){Ue(t,e,n),K(e,r,n),K(e,s,n),Y(s,o),l=!0},p(r,a){e=r;const u={};2&a&&(u.id=`${e[1].id}-${e[16].name}`),2&a&&(u.type=e[16].type),2&a&&(u.min=e[16].min),2&a&&(u.max=e[16].max),2&a&&(u.disabled=!e[1].enabled),!n&&2&a&&(n=!0,u.value=e[16].value,Ne((()=>n=!1))),t.$set(u),(!l||2&a)&&c!==(c=e[16].name+"")&&ce(o,c),(!l||2&a&&i!==(i=`${e[1].id}-${e[16].name}`))&&ie(s,"for",i)},i(e){l||(_e(t.$$.fragment,e),l=!0)},o(e){Ge(t.$$.fragment,e),l=!1},d(e){Ve(t,e),e&&J(r),e&&J(s)}}}function ho(e){let t,n,r,s;return n=new Br({props:{align:"center",spacing:2,vpad:4,$$slots:{default:[$o]},$$scope:{ctx:e}}}),{c(){t=Q("div"),We(n.$$.fragment),r=ne(),ie(t,"class","parameter")},m(e,o){K(e,t,o),Ue(n,t,null),Y(t,r),s=!0},p(e,t){const r={};16777218&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){s||(_e(n.$$.fragment,e),s=!0)},o(e){Ge(n.$$.fragment,e),s=!1},d(e){e&&J(t),Ve(n)}}}function mo(e){let t,n,r=e[1].mod.parameters,s=[];for(let t=0;t<r.length;t+=1)s[t]=ho(so(e,r,t));const o=e=>Ge(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=re()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);K(e,t,r),n=!0},p(e,n){if(2&n){let i;for(r=e[1].mod.parameters,i=0;i<r.length;i+=1){const o=so(e,r,i);s[i]?(s[i].p(o,n),_e(s[i],1)):(s[i]=ho(o),s[i].c(),_e(s[i],1),s[i].m(t.parentNode,t))}for(De(),i=r.length;i<s.length;i+=1)o(i);je()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)_e(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)Ge(s[e]);n=!1},d(e){Z(s,e),e&&J(t)}}}function go(e){let t,n,r,s,o,i,l,c,a;return n=new Yr({props:{hpad:4,vpad:2,spacing:8,align:"center",$$slots:{default:[fo]},$$scope:{ctx:e}}}),i=new Yr({props:{hpad:8,spacing:16,align:"end",$$slots:{default:[mo]},$$scope:{ctx:e}}}),{c(){t=Q("header"),We(n.$$.fragment),s=ne(),o=Q("div"),We(i.$$.fragment),ie(o,"class","parameters svelte-6n1kn7")},m(u,p){K(u,t,p),Ue(n,t,null),K(u,s,p),K(u,o,p),Ue(i,o,null),l=!0,c||(a=B(r=Lr.call(null,t,{button:0,offset:e[4],stopPropagation:!1})),c=!0)},p(e,t){const r={};16777218&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const s={};16777218&t&&(s.$$scope={dirty:t,ctx:e}),i.$set(s)},i(e){l||(_e(n.$$.fragment,e),_e(i.$$.fragment,e),l=!0)},o(e){Ge(n.$$.fragment,e),Ge(i.$$.fragment,e),l=!1},d(e){e&&J(t),Ve(n),e&&J(s),e&&J(o),Ve(i),c=!1,a()}}}function vo(e){let t,n,r,s,o,i,l,c,a,u,p,d;return r=new Br({props:{spacing:8,$$slots:{default:[co]},$$scope:{ctx:e}}}),i=new Br({props:{spacing:8,$$slots:{default:[uo]},$$scope:{ctx:e}}}),c=new Br({props:{$$slots:{default:[go]},$$scope:{ctx:e}}}),{c(){t=Q("section"),n=Q("div"),We(r.$$.fragment),s=ne(),o=Q("div"),We(i.$$.fragment),l=ne(),We(c.$$.fragment),ie(n,"class","inputs svelte-6n1kn7"),ie(o,"class","outputs svelte-6n1kn7"),ie(t,"class","module svelte-6n1kn7"),ie(t,"style",a=`transform: translate(${e[1].x}px, ${e[1].y}px);`),he(t,"disabled",!e[1].enabled),he(t,"selected",e[2])},m(a,f){K(a,t,f),Y(t,n),Ue(r,n,null),Y(t,s),Y(t,o),Ue(i,o,null),Y(t,l),Ue(c,t,null),u=!0,p||(d=se(t,"pointerdown",e[5]),p=!0)},p(e,[n]){const s={};16777219&n&&(s.$$scope={dirty:n,ctx:e}),r.$set(s);const o={};16777219&n&&(o.$$scope={dirty:n,ctx:e}),i.$set(o);const l={};16777218&n&&(l.$$scope={dirty:n,ctx:e}),c.$set(l),(!u||2&n&&a!==(a=`transform: translate(${e[1].x}px, ${e[1].y}px);`))&&ie(t,"style",a),2&n&&he(t,"disabled",!e[1].enabled),4&n&&he(t,"selected",e[2])},i(e){u||(_e(r.$$.fragment,e),_e(i.$$.fragment,e),_e(c.$$.fragment,e),u=!0)},o(e){Ge(r.$$.fragment,e),Ge(i.$$.fragment,e),Ge(c.$$.fragment,e),u=!1},d(e){e&&J(t),Ve(r),Ve(i),Ve(c),p=!1,d()}}}function yo(e,t,n){let r,{context:s}=t,{node:o}=t,{selected:i=!1}=t;const l=ve();let c=Ke({x:o.x,y:o.y});j(e,c,(e=>n(13,r=e)));return e.$$set=e=>{"context"in e&&n(0,s=e.context),"node"in e&&n(1,o=e.node),"selected"in e&&n(2,i=e.selected)},e.$$.update=()=>{var t;2&e.$$.dirty&&(t=o,X(c,r.x=t.x,r),X(c,r.y=t.y,r)),8192&e.$$.dirty&&function(e){n(1,o.x=e.x,o),n(1,o.y=e.y,o)}(r)},[s,o,i,l,c,function(t){ye(e,t)},function(e){s=e,n(0,s)},e=>l("wiretake",e),e=>l("connect",e),function(e){s=e,n(0,s)},(e,t)=>l("wireout",{output:e,portElem:t.detail.portElem}),function(e){o.enabled=e,n(1,o)},function(e,t){t.value=e,n(1,o)}]}class xo extends qe{constructor(e){super(),He(this,e,yo,vo,S,{context:0,node:1,selected:2})}}function wo(e,t,n){const r=e.slice();return r[31]=t[n],r[32]=t,r[33]=n,r}function Eo(e,t,n){const r=e.slice();return r[34]=t[n],r}function bo(e){let t,n,r,s,o,i;function l(t){e[18].call(null,t)}let c={output:{node:e[34],output:0}};return void 0!==e[1]&&(c.context=e[1]),n=new ro({props:c}),we.push((()=>Fe(n,"context",l))),n.$on("wireout",(function(...t){return e[19](e[34],...t)})),{c(){t=Q("div"),We(n.$$.fragment),s=ne(),ie(t,"class","track svelte-8jgkwb"),ie(t,"style",o=`--track-height: ${e[34].height}px`)},m(e,r){K(e,t,r),Ue(n,t,null),Y(t,s),i=!0},p(s,l){e=s;const c={};256&l[0]&&(c.output={node:e[34],output:0}),!r&&2&l[0]&&(r=!0,c.context=e[1],Ne((()=>r=!1))),n.$set(c),(!i||256&l[0]&&o!==(o=`--track-height: ${e[34].height}px`))&&ie(t,"style",o)},i(e){i||(_e(n.$$.fragment,e),i=!0)},o(e){Ge(n.$$.fragment,e),i=!1},d(e){e&&J(t),Ve(n)}}}function ko(e){let t,n,r=e[8].tracks,s=[];for(let t=0;t<r.length;t+=1)s[t]=bo(Eo(e,r,t));const o=e=>Ge(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=re()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);K(e,t,r),n=!0},p(e,n){if(6402&n[0]){let i;for(r=e[8].tracks,i=0;i<r.length;i+=1){const o=Eo(e,r,i);s[i]?(s[i].p(o,n),_e(s[i],1)):(s[i]=bo(o),s[i].c(),_e(s[i],1),s[i].m(t.parentNode,t))}for(De(),i=r.length;i<s.length;i+=1)o(i);je()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)_e(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)Ge(s[e]);n=!1},d(e){Z(s,e),e&&J(t)}}}function Ro(e){let t,n,r,s;function o(t){e[20].call(null,t)}function i(t){e[21].call(null,t,e[31],e[32],e[33])}let l={selected:e[6].has(e[31])};return void 0!==e[1]&&(l.context=e[1]),void 0!==e[31]&&(l.node=e[31]),t=new xo({props:l}),we.push((()=>Fe(t,"context",o))),we.push((()=>Fe(t,"node",i))),t.$on("pointerdown",(function(...t){return e[22](e[31],...t)})),t.$on("wiretake",(function(...t){return e[23](e[31],e[32],e[33],...t)})),t.$on("wireout",(function(...t){return e[24](e[31],...t)})),t.$on("connect",(function(...t){return e[25](e[31],e[32],e[33],...t)})),{c(){We(t.$$.fragment)},m(e,n){Ue(t,e,n),s=!0},p(s,o){e=s;const i={};320&o[0]&&(i.selected=e[6].has(e[31])),!n&&2&o[0]&&(n=!0,i.context=e[1],Ne((()=>n=!1))),!r&&256&o[0]&&(r=!0,i.node=e[31],Ne((()=>r=!1))),t.$set(i)},i(e){s||(_e(t.$$.fragment,e),s=!0)},o(e){Ge(t.$$.fragment,e),s=!1},d(e){Ve(t,e)}}}function Io(e){let t,n,r;return n=new Ys({props:{source:e[5],target:e[7]}}),{c(){t=ee("svg"),We(n.$$.fragment),ie(t,"class","dragged-wire svelte-8jgkwb"),he(t,"visible",!!e[4])},m(e,s){K(e,t,s),Ue(n,t,null),r=!0},p(e,r){const s={};32&r[0]&&(s.source=e[5]),128&r[0]&&(s.target=e[7]),n.$set(s),16&r[0]&&he(t,"visible",!!e[4])},i(e){r||(_e(n.$$.fragment,e),r=!0)},o(e){Ge(n.$$.fragment,e),r=!1},d(e){e&&J(t),Ve(n)}}}function To(e){let t,n,r,s,o,i,l,c,a,u,p;s=new Br({props:{spacing:4,$$slots:{default:[ko]},$$scope:{ctx:e}}});let d=[...e[8].graph.nodes],f=[];for(let t=0;t<d.length;t+=1)f[t]=Ro(wo(e,d,t));const $=e=>Ge(f[e],1,1,(()=>{f[e]=null}));let h=e[3]&&Io(e);return{c(){t=Q("div"),n=Q("div"),r=Q("div"),We(s.$$.fragment),o=ne();for(let e=0;e<f.length;e+=1)f[e].c();l=ne(),h&&h.c(),ie(r,"class","track-outputs svelte-8jgkwb"),ie(n,"class","graph-content"),ie(n,"style",i=`transform: translateX(${-e[0]}px);`),ie(t,"class","graph-viewport svelte-8jgkwb")},m(i,d){K(i,t,d),Y(t,n),Y(n,r),Ue(s,r,null),Y(n,o);for(let e=0;e<f.length;e+=1)f[e].m(n,null);Y(t,l),h&&h.m(t,null),e[27](t),a=!0,u||(p=[se(window,"pointerdown",e[17],!0),B(c=Es.call(null,t,e[26])),se(t,"pointermove",e[28]),se(t,"pointerup",e[29])],u=!0)},p(e,r){const o={};if(258&r[0]|64&r[1]&&(o.$$scope={dirty:r,ctx:e}),s.$set(o),40798&r[0]){let t;for(d=[...e[8].graph.nodes],t=0;t<d.length;t+=1){const s=wo(e,d,t);f[t]?(f[t].p(s,r),_e(f[t],1)):(f[t]=Ro(s),f[t].c(),_e(f[t],1),f[t].m(n,null))}for(De(),t=d.length;t<f.length;t+=1)$(t);je()}(!a||1&r[0]&&i!==(i=`transform: translateX(${-e[0]}px);`))&&ie(n,"style",i),e[3]?h?(h.p(e,r),8&r[0]&&_e(h,1)):(h=Io(e),h.c(),_e(h,1),h.m(t,null)):h&&(De(),Ge(h,1,1,(()=>{h=null})),je())},i(e){if(!a){_e(s.$$.fragment,e);for(let e=0;e<d.length;e+=1)_e(f[e]);_e(h),a=!0}},o(e){Ge(s.$$.fragment,e),f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)Ge(f[e]);Ge(h),a=!1},d(n){n&&J(t),Ve(s),Z(f,n),h&&h.d(),e[27](null),u=!1,L(p)}}}function Ao(e,t,n){let r,s;j(e,Je,(e=>n(8,s=e)));let o,i,l,c=0,a={xscroll:c,nodeMap:new WeakMap,viewportElem:null},u=!1,p={x:0,y:0},d=ys({x:0,y:0},{stiffness:.25,damping:1});function f(e){return i=a.viewportElem.getBoundingClientRect(),{x:e.x-i.left,y:e.y-i.top}}function $(e){return f(Ks(e.getBoundingClientRect()))}function h(e,t,r){n(4,l={node:t,output:r,pos:e}),n(3,u=!0),d.set(l.pos,{hard:!0})}j(e,d,(e=>n(7,r=e)));let m=new Set;function g(){m.clear(),n(6,m)}function v(){m.forEach((e=>{Je.update((t=>(t.graph.deleteNode(e),t)))})),m.clear()}function y(e,t){0===e.button&&(e.shiftKey||g(),n(6,m=m.add(t)))}return e.$$.update=()=>{1&e.$$.dirty[0]&&n(1,a.xscroll=c,a),18&e.$$.dirty[0]&&l&&(i=a.viewportElem.getBoundingClientRect(),n(5,p=l.pos)),48&e.$$.dirty[0]&&null===l&&d.set(p).then((()=>{n(3,u=!1)})),20&e.$$.dirty[0]&&l&&X(d,r=f(o),r)},[c,a,o,u,l,p,m,r,s,d,f,$,h,g,v,y,function(e){n(0,c=Math.max(0,c+e))},e=>{0!==e.button||e.shiftKey||e.ctrlKey||g()},function(e){a=e,n(1,a),n(0,c)},(e,t)=>h($(t.detail.portElem),e,0),function(e){a=e,n(1,a),n(0,c)},function(e,t,n,r){n[r]=e,Je.set(s)},(e,t)=>y(t,e),(e,t,n,r)=>{const i=r.detail,l=e.inputs.get(i),c=a.nodeMap.get(l.node)?.get(l.output);X(Je,t[n]=e.disconnectInput(i),s),l&&(h(f(D(c)),l.node,l.output),d.set(f(o),{hard:!0}))},(e,t)=>h($(t.detail.portElem),e,t.detail.output),(e,t,r,o)=>{if(l){const i=o.detail;l.node.connect(e,i,l.output),n(4,l=null),n(3,u=!1),X(Je,t[r]=e,s)}},e=>{switch(e.detail){case"graph.node.delete":v()}},function(e){we[e?"unshift":"push"]((()=>{a.viewportElem=e,n(1,a),n(0,c)}))},e=>n(2,o={x:e.clientX,y:e.clientY}),()=>n(4,l=null)]}class No extends qe{constructor(e){super(),He(this,e,Ao,To,S,{scrollBy:16},[-1,-1])}get scrollBy(){return this.$$.ctx[16]}}function Oo(e,t,n){const r=e.slice();return r[25]=t[n],r[26]=t,r[27]=n,r}function Mo(e,t){let n,r,s,o,i,l,c;function a(e){t[13].call(null,e,t[25],t[26],t[27])}let u={selected:t[0].has(t[25])};function p(e){t[15].call(null,e,t[25])}void 0!==t[25]&&(u.track=t[25]),r=new hs({props:u}),we.push((()=>Fe(r,"track",a))),r.$on("solo",t[9]),r.$on("pointerdown",(function(...e){return t[14](t[25],t[27],...e)}));let d={snaps:[1,2,3,4].map(_o),min:64};return void 0!==t[25].height&&(d.position=t[25].height),i=new Bn({props:d}),we.push((()=>Fe(i,"position",p))),{key:e,first:null,c(){n=re(),We(r.$$.fragment),o=ne(),We(i.$$.fragment),this.first=n},m(e,t){K(e,n,t),Ue(r,e,t),K(e,o,t),Ue(i,e,t),c=!0},p(e,n){t=e;const o={};33&n&&(o.selected=t[0].has(t[25])),!s&&32&n&&(s=!0,o.track=t[25],Ne((()=>s=!1))),r.$set(o);const c={};!l&&32&n&&(l=!0,c.position=t[25].height,Ne((()=>l=!1))),i.$set(c)},i(e){c||(_e(r.$$.fragment,e),_e(i.$$.fragment,e),c=!0)},o(e){Ge(r.$$.fragment,e),Ge(i.$$.fragment,e),c=!1},d(e){e&&J(n),Ve(r,e),e&&J(o),Ve(i,e)}}}function Lo(e){let t,n,r=[],s=new Map,o=e[5].tracks;const i=e=>e[25];for(let t=0;t<o.length;t+=1){let n=Oo(e,o,t),l=i(n);s.set(l,r[t]=Mo(l,n))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=re()},m(e,s){for(let t=0;t<r.length;t+=1)r[t].m(e,s);K(e,t,s),n=!0},p(e,n){if(2593&n){const o=e[5].tracks;De(),r=Be(r,n,i,1,e,o,s,t.parentNode,Xe,Mo,t,Oo),je()}},i(e){if(!n){for(let e=0;e<o.length;e+=1)_e(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)Ge(r[e]);n=!1},d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&J(t)}}}function Po(e){let t,n,r,s,o,i;return t=new Br({props:{spacing:2,$$slots:{default:[Lo]},$$scope:{ctx:e}}}),r=new Sr({}),o=new Ur({}),o.$on("newtrack",e[10]),{c(){We(t.$$.fragment),n=ne(),We(r.$$.fragment),s=ne(),We(o.$$.fragment)},m(e,l){Ue(t,e,l),K(e,n,l),Ue(r,e,l),K(e,s,l),Ue(o,e,l),i=!0},p(e,n){const r={};268435489&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){i||(_e(t.$$.fragment,e),_e(r.$$.fragment,e),_e(o.$$.fragment,e),i=!0)},o(e){Ge(t.$$.fragment,e),Ge(r.$$.fragment,e),Ge(o.$$.fragment,e),i=!1},d(e){Ve(t,e),e&&J(n),Ve(r,e),e&&J(s),Ve(o,e)}}}function So(e){let t,n;return t=new No({props:{}}),e[17](t),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,n){t.$set({})},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(n){e[17](null),Ve(t,n)}}}function Co(e){let t,n;return t=new Vs({props:{}}),e[16](t),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,n){t.$set({})},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(n){e[16](null),Ve(t,n)}}}function Do(e){let t,n,r,s,o,i;t=new Br({props:{spacing:1,$$slots:{default:[Po]},$$scope:{ctx:e}}});const l=[Co,So],c=[];function a(e,t){return e[4].tracklistMode===Nn.Timeline?0:e[4].tracklistMode===Nn.Graph?1:-1}return~(s=a(e))&&(o=c[s]=l[s](e)),{c(){We(t.$$.fragment),n=ne(),r=Q("div"),o&&o.c(),ie(r,"class","content svelte-1128m5k")},m(e,o){Ue(t,e,o),K(e,n,o),K(e,r,o),~s&&c[s].m(r,null),i=!0},p(e,n){const i={};268435489&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i);let u=s;s=a(e),s===u?~s&&c[s].p(e,n):(o&&(De(),Ge(c[u],1,1,(()=>{c[u]=null})),je()),~s?(o=c[s],o||(o=c[s]=l[s](e),o.c()),_e(o,1),o.m(r,null)):o=null)},i(e){i||(_e(t.$$.fragment,e),_e(o),i=!0)},o(e){Ge(t.$$.fragment,e),Ge(o),i=!1},d(e){Ve(t,e),e&&J(n),e&&J(r),~s&&c[s].d()}}}function jo(e){let t,n,r,s,o,i,l,c;function a(t){e[18].call(null,t)}let u={direction:"row",min:150,snaps:[150,200,250],$$slots:{default:[Do]},$$scope:{ctx:e}};return void 0!==e[4].trackHeadsWidth&&(u.splitpos=e[4].trackHeadsWidth),n=new Un({props:u}),we.push((()=>Fe(n,"splitpos",a))),{c(){t=Q("div"),We(n.$$.fragment),ie(t,"class","tracklist svelte-1128m5k")},m(r,a){K(r,t,a),Ue(n,t,null),e[19](t),i=!0,l||(c=[se(window,"pointerdown",e[12],!0),B(s=Es.call(null,t,e[20])),B(o=Lr.call(null,t,{button:1,offset:e[6],invert:!0,relative:!0})),se(t,"wheel",e[21])],l=!0)},p(e,[t]){const s={};268435517&t&&(s.$$scope={dirty:t,ctx:e}),!r&&16&t&&(r=!0,s.splitpos=e[4].trackHeadsWidth,Ne((()=>r=!1))),n.$set(s)},i(e){i||(_e(n.$$.fragment,e),i=!0)},o(e){Ge(n.$$.fragment,e),i=!1},d(r){r&&J(t),Ve(n),e[19](null),l=!1,L(c)}}}const _o=e=>64*e;function Go(e,t,n){let r,s,o;j(e,Pn,(e=>n(4,s=e))),j(e,Je,(e=>n(5,o=e)));var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};let l=new Set,c=null,a=null,u=null,p=Ke({x:0,y:0});function d(){X(Je,o.tracks=o.tracks.filter((e=>!l.delete(e))),o)}function f(e){n(0,l=l.add(e)),null==a||a.selectAllClips(e)}function $(){l.clear(),null==a||a.deselectAllClips(),n(0,l)}function h(e,t,n){if(0===e.button&&(f(t),e.shiftKey&&l.size>0)){let e=null;for(let t=1;n+t<o.tracks.length||n-t>=0;t++){if(n+t<o.tracks.length&&l.has(o.tracks[n+t])){e=[n,n+t];break}if(n-t>=0&&l.has(o.tracks[n-t])){e=[n-t,n];break}}if(e)for(let t=e[0];t<e[1];t++)f(o.tracks[t])}}j(e,p,(e=>n(22,r=e)));return e.$$.update=()=>{if(4194306&e.$$.dirty&&c&&n(1,c.scrollTop+=r.y,c),4194332&e.$$.dirty)switch(s.tracklistMode){case Nn.Timeline:null==a||a.scrollBy(r.x);break;case Nn.Graph:null==u||u.scrollBy(r.x)}},[l,c,a,u,s,o,p,d,$,function(e){const t=e.detail,n=o.tracks.every((e=>e.enabled===(e===t)));for(let e=0;e<o.tracks.length;e++)X(Je,o.tracks[e].enabled=n||o.tracks[e]===t,o)},function(){return i(this,void 0,void 0,(function*(){yield Te(),n(1,c.scrollTop=c.scrollHeight-c.clientHeight,c)}))},h,e=>{0!==e.button||e.shiftKey||e.ctrlKey||$()},function(e,t,n,r){n[r]=e,Je.set(o)},(e,t,n)=>h(n,e,t),function(e,t){t.height=e,Je.set(o)},function(e){we[e?"unshift":"push"]((()=>{a=e,n(2,a)}))},function(e){we[e?"unshift":"push"]((()=>{u=e,n(3,u)}))},function(e){s.trackHeadsWidth=e,Pn.set(s)},function(e){we[e?"unshift":"push"]((()=>{c=e,n(1,c),n(22,r)}))},e=>{switch(e.detail){case"timeline.track.delete":d()}},async e=>{e.preventDefault(),p.set({x:e.deltaX,y:e.deltaY}),await Te(),p.set({x:0,y:0})}]}class zo extends qe{constructor(e){super(),He(this,e,Go,jo,S,{})}}const Xo=Ke([{name:"Channel merger",class:w},{name:"Channel splitter",class:E},{name:"Gain",class:R},{name:"Delay",class:k},{name:"Compressor",class:b}]);function Bo(e,t,n){const r=e.slice();return r[5]=t[n],r}function Fo(e){let t,n;return t=new Br({props:{$$slots:{default:[Vo]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,n){const r={};257&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function Wo(e){return{c:T,m:T,p:T,i:T,o:T,d:T}}function Uo(e){let t,n,r,s,o=e[5].name+"";function i(...t){return e[3](e[5],...t)}return{c(){t=Q("button"),n=te(o),ie(t,"class","svelte-6yyl69")},m(e,o){K(e,t,o),Y(t,n),r||(s=se(t,"click",i),r=!0)},p(t,r){e=t,1&r&&o!==(o=e[5].name+"")&&ce(n,o)},d(e){e&&J(t),r=!1,s()}}}function Vo(e){let t,n=e[0],r=[];for(let t=0;t<n.length;t+=1)r[t]=Uo(Bo(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=re()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);K(e,t,n)},p(e,s){if(5&s){let o;for(n=e[0],o=0;o<n.length;o+=1){const i=Bo(e,n,o);r[o]?r[o].p(i,s):(r[o]=Uo(i),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){Z(r,e),e&&J(t)}}}function Ho(e){let t,n,r,s;const o=[Wo,Fo],i=[];function l(e,t){return e[1].tracklistMode===Nn.Timeline?0:e[1].tracklistMode===Nn.Graph?1:-1}return~(t=l(e))&&(n=i[t]=o[t](e)),{c(){n&&n.c(),r=re()},m(e,n){~t&&i[t].m(e,n),K(e,r,n),s=!0},p(e,s){let c=t;t=l(e),t===c?~t&&i[t].p(e,s):(n&&(De(),Ge(i[c],1,1,(()=>{i[c]=null})),je()),~t?(n=i[t],n||(n=i[t]=o[t](e),n.c()),_e(n,1),n.m(r.parentNode,r)):n=null)},i(e){s||(_e(n),s=!0)},o(e){Ge(n),s=!1},d(e){~t&&i[t].d(e),e&&J(r)}}}function qo(e){let t,n;return t=new Gn({props:{$$slots:{default:[Ho]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,r){Ue(t,e,r),n=!0},p(e,[n]){const r={};259&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){Ge(t.$$.fragment,e),n=!1},d(e){Ve(t,e)}}}function Yo(e,t,n){let r,s;function o(e){const t=new d({effect:new e.class,x:100,y:100});Je.update((e=>(e.graph.nodes.add(t),e)))}j(e,Xo,(e=>n(4,r=e))),j(e,Pn,(e=>n(1,s=e)));let i;return e.$$.update=()=>{16&e.$$.dirty&&n(0,i=r.sort(((e,t)=>e.name.localeCompare(t.name))))},[i,s,o,e=>o(e)]}class Ko extends qe{constructor(e){super(),He(this,e,Yo,qo,S,{})}}function Jo(e){let t,n,r,s;return t=new Ko({}),r=new zo({}),{c(){We(t.$$.fragment),n=ne(),We(r.$$.fragment)},m(e,o){Ue(t,e,o),K(e,n,o),Ue(r,e,o),s=!0},i(e){s||(_e(t.$$.fragment,e),_e(r.$$.fragment,e),s=!0)},o(e){Ge(t.$$.fragment,e),Ge(r.$$.fragment,e),s=!1},d(e){Ve(t,e),e&&J(n),Ve(r,e)}}}function Zo(e){let t,n,r,s,o;function i(t){e[7].call(null,t)}let l={direction:"row",snaps:e[4],$$slots:{default:[Jo]},$$scope:{ctx:e}};return void 0!==e[3].sidePaneWidth&&(l.splitpos=e[3].sidePaneWidth),t=new Un({props:l}),we.push((()=>Fe(t,"splitpos",i))),s=new Gn({}),{c(){We(t.$$.fragment),r=ne(),We(s.$$.fragment)},m(e,n){Ue(t,e,n),K(e,r,n),Ue(s,e,n),o=!0},p(e,r){const s={};512&r&&(s.$$scope={dirty:r,ctx:e}),!n&&8&r&&(n=!0,s.splitpos=e[3].sidePaneWidth,Ne((()=>n=!1))),t.$set(s)},i(e){o||(_e(t.$$.fragment,e),_e(s.$$.fragment,e),o=!0)},o(e){Ge(t.$$.fragment,e),Ge(s.$$.fragment,e),o=!1},d(e){Ve(t,e),e&&J(r),Ve(s,e)}}}function Qo(e){let t,n,r,s,o,i,l,c;function a(t){e[8].call(null,t)}n=new Mr({});let u={reverse:!0,snaps:e[4],$$slots:{default:[Zo]},$$scope:{ctx:e}};return void 0!==e[3].bottomPaneHeight&&(u.splitpos=e[3].bottomPaneHeight),s=new Un({props:u}),we.push((()=>Fe(s,"splitpos",a))),{c(){t=Q("main"),We(n.$$.fragment),r=ne(),We(s.$$.fragment),ie(t,"class","svelte-2bg3vx")},m(o,a){K(o,t,a),Ue(n,t,null),Y(t,r),Ue(s,t,null),i=!0,l||(c=[se(window,"keydown",e[5]),se(window,"keyup",e[6])],l=!0)},p(e,[t]){const n={};520&t&&(n.$$scope={dirty:t,ctx:e}),!o&&8&t&&(o=!0,n.splitpos=e[3].bottomPaneHeight,Ne((()=>o=!1))),s.$set(n)},i(e){i||(_e(n.$$.fragment,e),_e(s.$$.fragment,e),i=!0)},o(e){Ge(n.$$.fragment,e),Ge(s.$$.fragment,e),i=!1},d(e){e&&J(t),Ve(n),Ve(s),l=!1,L(c)}}}function ei(e,t,n){let r,s,o;j(e,Ze,(e=>n(1,r=e))),j(e,Je,(e=>n(2,s=e))),j(e,Pn,(e=>n(3,o=e)));let i=!0;return[i,r,s,o,[200],e=>{" "===e.key&&i&&(n(0,i=!1),X(Ze,r=r.toggle(s),r))},e=>{" "===e.key&&n(0,i=!0)},function(e){o.sidePaneWidth=e,Pn.set(o)},function(e){o.bottomPaneHeight=e,Pn.set(o)}]}(async()=>{const e=new d({effect:new I,x:1200,y:100}),t=new d({effect:new R,x:100,y:150}),n=new d({effect:new b,enabled:!1,x:300,y:200}),r=new d({effect:new k,x:550,y:100}),s=new d({effect:new E,x:200,y:50}),o=new d({effect:new w,x:900,y:150});s.connect(r,0,1),r.connect(o,0),t.connect(n),n.connect(o,1),o.connect(e);const i="BRLY_ALV_MORE_DRUMS_Drumloop_150_OnHoldC78.wav",l=await fetch("data/"+i),c=await l.blob(),a=await D(Ze).decodeBlob(c);Je.update((l=>(l.tempo=150,l.tracks.push(new x),l.tracks.push(new x),l.tracks.push(new x),l.tracks[1].name="Longer name",l.tracks[2].name="Very very very long name",l.graph.nodes.add(t),l.graph.nodes.add(n),l.graph.nodes.add(r),l.graph.nodes.add(s),l.graph.nodes.add(o),l.graph.nodes.add(e),l.tracks[0].connect(s),l.tracks[1].connect(t),l.tracks[0].clips.push(new g(i,c,0,a.duration)),l.tracks[1].clips.push(new g(i,c,0,a.duration,2*a.duration)),l.tracks[2].clips.push(new g(i,c,2,a.duration,1.5*a.duration,-1)),l)))})();return new class extends qe{constructor(e){super(),He(this,e,ei,Qo,S,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
